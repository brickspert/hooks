(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/useAPI/index.mdx":function(e,n,A){"use strict";A.r(n);var t,r=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),o=(A("./node_modules/_antd@3.22.0@antd/es/spin/style/index.js"),A("./node_modules/_antd@3.22.0@antd/es/spin/index.js")),a=(A("./node_modules/_antd@3.22.0@antd/es/button/style/index.js"),A("./node_modules/_antd@3.22.0@antd/es/button/index.js")),u=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=A("react"),c=A.n(i),s=A("./node_modules/_@mdx-js_react@1.3.1@@mdx-js/react/dist/index.es.js"),l=A("./node_modules/_docz@1.2.0@docz/dist/index.esm.js"),g=(A("./node_modules/_antd@3.22.0@antd/es/select/style/index.js"),A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js")),m=A.n(g),B=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),d=A("./src/useAsync/index.ts"),I=function(e){t=e};I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"configRequest",filename:"src/useAPI/index.ts"}});var p=function(e){var n=e.method||t||window.fetch;return Object(d.a)(Object(B.a)(m.a.mark(function A(){return m.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",new Promise(function(A,t){n(e.url,e.options).then(function(){var e=Object(B.a)(m.a.mark(function e(n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A(n.json&&"function"===typeof n.json?n.json():n);case 1:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t(e)})}));case 1:case"end":return A.stop()}},A)})),[JSON.stringify(e)],{manual:e.manual,pollingInterval:e.pollingInterval,onError:e.onError,onSuccess:e.onSuccess})},j=p;p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAPI",filename:"src/useAPI/index.ts"}}),A.d(n,"default",function(){return Q});b="Demo";var b,O={},E="wrapper";function Q(e){var n=e.components,A=Object(u.a)(e,["components"]);return Object(s.b)(E,Object.assign({},O,A,{components:n,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"useapi"},"useAPI"),Object(s.b)("p",null,"\u4e00\u4e2a\u5185\u7f6e ",Object(s.b)("inlineCode",{parentName:"p"},"umi-request"),"\uff0c\u5e2e\u4f60\u7ba1\u7406\u7f51\u7edc\u8bf7\u6c42\u7684 Hook\uff0c\u652f\u6301\u7acb\u5373\u6267\u884c\uff0c\u624b\u52a8\u89e6\u53d1\u6267\u884c\uff0c\u8f6e\u8be2\u3002"),Object(s.b)("h2",{id:"\u4ee3\u7801\u6f14\u793a"},"\u4ee3\u7801\u6f14\u793a"),Object(s.b)("h3",{id:"\u7acb\u5373\u6267\u884c"},"\u7acb\u5373\u6267\u884c"),Object(s.b)(l.c,{__position:0,__code:"() => {\n  function Demo() {\n    const [state, set] = useState(0)\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api?id=${state}`,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>\n          <div>id: {state}</div> <div>email: {email}</div>\n        </Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={run}>reload</Button>\n          <Button onClick={cancel}>cancel</Button>\n          <Button onClick={() => set(c => c + 1)}>increase id</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:i.useState,useMemo:i.useMemo,Button:a.a,Spin:o.a,useAPI:j},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhvYABtFEyPW0cAF1xookisgjEK3zpumGag9BolcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJwW-igK5ikIW57keTIMEiCiBBwI9JFmCBvq4bgABJgBZ2h5GKGLBZreQBY9wtUBc6jXGgLmiKomio1pj28eWiMY9F0j2AAHwT1ivdDeBQmRuwk6Z9mOUZkLOez4BU4D6B3Z9ixGbj1x2fLj3vY9roCD6cxw4rhMDvb2seL4xq0FUmctsl6WZ32zWK5jWQuCuJ3SJdyHY1rKHS511iV_kBfZHHwWpB71BO_bxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQseI8P4_OL2VB7CgLEbYW0lb7S6MPdAUgf7UAPl3I-HFmTUAAUAracsERQH2mg-cUCEH723h7eBJ9zBIMATsLaUc2YEAjOQNGNCADUvUOT7TQOQU0RFOCQMkNAvBX8CFcNwefS-sCd6bm3g3T2msm4t1rBTGi7BRG03kODbcmNoZmC_CAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9FYmx5A_R8j0AIRG5UGjQQHHARglgCbrG1lcFE04UgqQsM_MmcBvpXDFAARwZCiBoqkCDhPYFEVAoR4gxPYF4Sg5JUBpMFAkAoyTaACFYNkq4mSiCBAEGko8EwnA5IjEE6-oSliRI-tE2JMAEnwAIMkl4i18ZVUiNSPxYg0nUGcKEcgCI4A9ImugK4lgRnLVYJQLg0zUBngEEIAQLTup7IOes9gmztlmHBmYWAUxMSUA8PEKiTSVkTTaSEmWewZhRJyfExJgyUlnO8eMoijAkRTMcnDe0DNdCQBSH8gZ40IyNOGK8ihSIzk0wsPcx5UBnmovGiipwKl5AqTMAzNWukfJ-PGuCiMkSrheJ8ZMzF6wGZdH6SifFThxqRItqOAl2ccVPIFTy7OOITYjBwGAUc000lSIEOYRxTlJltxrP4JxE11ma2dGMYFRAJn-Jjl0OA-TWAwEVjAdQWwCCst4ROPp_zuUPj5drTp3ycBdOoHAcRHscATDoBGDVtiTVoyxV3B1pqoDmojCa_8przAXSujdZocbNDMiej5doJN3rUC-r9NNCbUZXBNR-fBC1y0fGiNNCM3RRnhq7l0a1kpa1lvtRYL2aS6ZezrkzAAUs4HUAA5HAHyZwQDAIkel3yOS1xXA2msGSsmrz5Uu-IvaLDFMATOMpGRKkro9Vu0pbj90br_icoUVw-XUAvQIM9My5kLPuF8ggnrUCzPmfAOAvalDrDbaSyFWAxIIyRlMSlKkNFaKMsqoyFlDHGKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoCPJ2AR4ic8LUaTFGAcjZ4wAytsnRN09kXxkqcnBRZVh-QZEmb5WK_RKm0AdVENABRxohXY5uwTWRjjznghJqTfYZPCfIB4K4Md7E4FcAFZ9SJGa5zRvqw1idcjhkgM6dAYhFrJ0yQkcadmoBKf7GwWTLN7Q-Uk45aTrnhMxCPAIe8invO-xCXMiIAhqHqa1UZmUJnk7IQRmgbIYgliYDgkVdgNS6mLQXRMWwadRMD1nD5dL8Eu34gK2V5IpX5OJAq_luAo7SIebkxlhrBJ_U8cCzkWr7WVyNY-B4caam0nXOrCiZ-SK7V0wlScKV5ByQCEsDx_YEZBv-YyPeNtdMNvdaC55jrBWuhFfEz5Qb1WxvObCOwnyFCF1zdGB8JbK2jxrb2wF7bR2msncDsV9g5ofJaiyDgeqIxUbmkq019zqT1gAf9NWE1oQjxIq0zplIenUCJAMxyK4xnQX-NM4lmAFncz1oG51mH41ge0FB6MQGFXHsLZe6t8I63OubZ6ztmsE6JqDbU7lyRo5pG6rGQagnDYTVmrrQE-1H2tu9bzKoJ7RECCvZgGt4NND7vlt5-zgrAv-MRqh0NiMWmg26cTsnHH3Ou6PEjcj7ogAr5UAGeRgBF5UAFnagA300ABZqgAAfUANOagBC6K94AGH_ACFNoASHNAAr8YAPbVADLfoAHPNy0WCl9GmAarjftCHcONP5rznxAZHmTY5gj07pPb2WwlDSTknYRRP-H6n3sEuje_ZQpOB-1oB2L6_gQhY7PfXCrHtlE-yUCb37YmZy289tPkfqfheKrM0lyzV2rmAbEmgcpHjug6m-d0vj4a11QByXkgpSp5GSHYIAejNABkKoAXCUA-ADRlQA5kaABkI9YZeUi7oqVUrLyO6nn726AB28YAEfRgAIW6AAvqYAClpgA19aABLnkyO-o-l-i0q8msmjBcugIAZfoAAhGgA-Uqx6ADAMYgbekclcLemcpgdgewIAIyagApLFEFr4I6KTzBZbCBXx3Zo66ZXD6aGajJUHkrepTD1TPzVLsHTZhrw5mAsHdD9ggowBijNyKp8acH2Lo6Y7Y58HLT44wA0oJbmbJZWYqQMxyHi4KEL5BTKbyGKEtxgpY7LQ-Ra4xajKOYhB2BIjsZQpjhuLb7sA2GKoABqheuhhO4aECBQVwp-4ohS6wGQByOSt6aS1cOSlgaSWCq8IhMw8qyEVwph1I_hqAehS-JOhhEK1YnOM8K4k2L8bBz8FWSOR4YhdRK4cUFETRWRcOJK6-8MJOoGhob0ZMGkmk1iKqYo9IyMtK9haqYAlhZuah3BfemhQKcWoKYxGcBAqW6wmAdwVw6GdAmAWGuGLkPkBm5cXqfsVwu-USjAaxyMDhKcMUuOfhFhQRUADINx6cdxRuoWUwzMlGSwqunMqsREPMtAHxShqArx7xtxGxDYC64RiUho8QREva6R7RvaSsuRKx5hEJvaFR3xdM1R6JQu9IjRVhZhBRZ6rRRExJii5cnabKQh4w3Wwc5hYAfi3WHx4xGxROBhlmDYxOpO6A3OMKbQmYwJbJfMIpTJYmUwEpNG62aIMA0pne0I5qAg0EN2ZO1GJOEYiMUAREbagSRE9GjGVCOutMVAyEr6vQ-yLodCPkPUFWspHwfQYYcp4wSp9RFhzhsuHsVpNArpdpmYDpvUFW8OHaaWMAdwRp1Y7KyErJRGCQpG2wmm8xGOPBWOOOeO2JXJ6xvJy-KWYaK49ugAdh6AC78oALBygAWPJx6ADVEYAGvKgAEbZgFJ4rjxn_xikekBk2lun6AVaq4Rh2CjKTTsBabfrsAIkpBXCohF5ezT4KrmAzFzHaa6a-pjkBqoARjVzFn2p65KyODWneTPQ9lBnumC7tqcDNDTpRJvqN5foXnG7nFNYPqfqLLblizT7D7lqDnDnRxQTjlpZiwSxSwJTTlIkGndDzlD4SL2qLnHBiwwVeyaxVoEA1pxHt7k57nXkHldnHk-Snm2nnkEk-x67PlvoUEkUVzkWt4HK1pt4CBfmCxz4-y_loyjmAXQgMUgUjzgX6nsLQXbwsW7Z4BCBjAYX1KawMnVhj7bE-pKYMzVGJnEYpkxwzY1gwDqmakUToBnkujnZentldl6UhmOkVb26ACgdoACZpIePuK4eunOJltqVFzJAWTlzWz8DOK4LFbFI5AF9iE5El1SMAYwt6j41R8wIkHIPFYFVw_FUFHI3OY-OOClTJ1JdaGkSZJGEoqZFpdMmlGQ2lREulRF-lnpDIFWhFfZplYZJZl-gAQWaAA6CrZfZdeY5aVTQI-YLO1dVa-ulV5YolUaOEOexf5aOksEFVliFewGFe0OlVFTFRERBQJYlWNksClSFuyunCjhKVlapU4SueoU8ToXmRMfoYWVZruXTPboAEYGgAsJotW0x64ACEBVGpWpJVvVXV11l-gAaZmACE1m_g7ijmHoACl6gA016ADOym_qHoAPFpgAcCqB4h6ayuAjCBxTBKyHVrnhmtV87dZOXfU1jwU9XBmvoNEZ7m7qFW45yrXeUrjwWCmGFrU02pWqmb57rxDDGaq7UqU5WZ5uGapY0Y7qVCxMm4VHkEXGUdWw5fy3IOoEC9LckFklEr6awvXkVH7U3PUunS2E10xNy0po3jiY2U2W7Zw25IVq3XlVWk34UTjISHmdUuUWD25O4P6P7e4-6h6VlI1e7bwk3ukObTXq4CCnUbH82RxnLs0_5QBc1ORC0-oD41jkWf7f77puF_61IZBJ1MUu2X6ABBmonoAH3RgAdv6ABhcuku4MuqHoAJhKgAG3mAAl0T7cHn7dhRNDrb1c3i3nvt6hbFXfEHrYLPbqjejfbVuabRjtTRbbrikk5eNPFTBR2tCJBc7TWPbr7eWgbY4UbVMAHceOTSuRbpPebbnLnahFJULhCfLeGb2ozCnfktul_hXlAO6reUforMhHOtWLGfTGLfOKBcpcmXzSuAncdbmTCcrUKQ4X6UPZfoAExpgARtaABQcv9YAA6mgAdsZx6aw22B2hlOlW0TT30lLl7lL7qD0WDq091-x92ZID2r153sCF2R59gP0FCh4WWABgLig2AY9V3NUQNRXMJUTT6dHfunHeQKA5bV_PboAC9ugApcaAAL8e_l_PBSbfYkfVnNbqfTfSuIzErK_d0jgKnc_V_RYD_T8asPLFAIA9lTsGpVdTWDg_aWZXVfiGJX3lxQckNVQn-RNGNYFQxcFaFQxY-OkdkK-ItYifFQtEletbnEphRKaTavzQnZmUsQ43TGRVQ01sY6Q3Qwupk8_eIwI8xcvewpQ2_f3VAOQxfuwPI4ADwKyjFcajOAGjU92jF9COjcPpeVPsTjNV-D9q_DTFEZnst9GtVTBjvduTHNL9Y9SwojnNIx5Apj7A5j8F8JoFS1zsf4U5vak1OzOAElva1cwSlGOA1cqJ7g6CGJORL6hjmtSaRDj9advYBa213QJa_9HYeJ3WlRX81RZ65NVJWpP69JXRqAGiTU2wrgaQ8a1AgEugIEBgYE4a_AqA3ojISA7A_APwxY1QGQ5oP4ZIWL5c_A6p-Q1A_AVw_AIUOAdLIUNU6w_A5QrCEAVD1LOLIAmk60eEsA0IWA3oJLcmZIlAiQuYeQ4mpoko5oeLfwpYTL1Y_ARWnL_AcG8airFgLL0Z-x8IEA8AnLC6_A0rog2L_AAAem_DgAABw4BpSas1j8ASSqsgDmtJg4AABMdLPUDrWrggmolokQLrlraUNrdr_AcOVykG8ruAsKEAKQ8LkL2gSLZiqL_AtAPoWQ1LuLpotA5oJr5oswMw_A8gCgSiQAA",mdxType:"Playground"},function(){return Object(s.b)(function(){var e=Object(i.useState)(0),n=Object(r.a)(e,2),A=n[0],t=n[1],u=j({url:"https://randomuser.me/api?id=".concat(A)}),l=u.data,g=u.loading,m=u.cancel,B=u.run,d=Object(i.useMemo)(function(){return(((l||{}).results||[])[0]||{}).email},[l]);return Object(s.b)(c.a.Fragment,null,Object(s.b)(o.a,{spinning:g,mdxType:"Spin"},Object(s.b)("div",null,"id: ",A)," ",Object(s.b)("div",null,"email: ",d)),Object(s.b)(a.a.Group,{style:{marginTop:16}},Object(s.b)(a.a,{onClick:B,mdxType:"Button"},"reload"),Object(s.b)(a.a,{onClick:m,mdxType:"Button"},"cancel"),Object(s.b)(a.a,{onClick:function(){return t(function(e){return e+1})},mdxType:"Button"},"increase id")))},{mdxType:"Demo"})}),Object(s.b)("h3",{id:"\u624b\u52a8\u89e6\u53d1\u6267\u884c"},"\u624b\u52a8\u89e6\u53d1\u6267\u884c"),Object(s.b)(l.c,{__position:1,__code:"() => {\n  function Demo() {\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api`,\n      manual: true,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button onClick={run} style={{ marginTop: 16 }}>\n          fetch\n        </Button>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:i.useState,useMemo:i.useMemo,Button:a.a,Spin:o.a,useAPI:j},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGLxfFqJUFCeIrlRBkdd1haxfp6gXOo1xoHGiiqJoqNad1vHlojT30GZ9gAB9fdY-QOVDeBQmRux_fYABtABdDko5CmO_YD4Ag5wW3oDN83o-90iY6z8W32zroCD6cwXezhMDsr2seL4xq0FUmctrZjmZ32jOpdYzv5CkOvUGryvGHYm5mWoewoFibYtv5tCNtgLaoP8wLLEoGYrh6tLUP2y3zbAUdpt3umpBHzjB91qRz5rIvxfB3WS7L2sKZo9hNxXeQ79rSRMehswvxAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9Ig5B5A_R8j0AIRG5UGjQQHHARglgCbrD6F3FE04UgqQsGvMmcBvpXDFAARwZCiBoqkCB0PYPrQ2UBmHsC8JQckqBeGCgSAULhtABCsHiEIg2RBAgCF4UeCYTghERkoVcahnM9gzEYUIthHCCBcJeItfGVVIjUlIWIXh1BnChHIAiOATCrgRnQFcSwljlqsEoFwBxqAzwCCEAILR3UQlhN8ewfxgSzDgzMLAKYmJKAeHiFRDRXiJo6PWqifRDCPruPYCY-AZjuExKITYoijAkT2McnDe0DNdCQBSKUlyPkIzqOGNk92IRUCJBiTTCwqT0lQEyT08a3SnAqXkCpMwDNha6R8qQ8adSIwMKuIQ4hdihnrAZl0dhZSJlOHGgwtWo5JmR1GRky5pzI44iViMHA-8CDTV4Q_AQ5gMFOTsRXGs_hMETV8WLZ0YwqlEFsWQz2XQ4CiNYDAPmMB1BbAIHs12NZDmmJOQ-c5lCljnMKdbG-2ccATDoBGQFKDYVo2GTXCc8B4UwAjLC_8cLzAXSujdZorLNDMiej5doJN3rUC-r9Xl7LUZXFhR-I-FsMV0w-NEaaEZuhWLpTXLoKLJSqtlQqmsQdeF0yDgXKOAApZwOoAByOA9EzggGARIGzDEcnziuDVNZ-FGwMQQNW7gBEFwsJIyeM4ZEZHkV3c5wbpG4IjYGvYwTQlCiuISxNYT42OOca4-4PqcCZpcfAOABclDrD1XMhpWAxIIyRlMJZKl_6AKMj8oyFkIFQKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoDpJ2OO4ipFaBzrFGAOdZ4wD71snRN09kXzzKcnBNxVh-QZDsb5WK_R5G0AZVENABRxohT3UGi9WRjjzngvex9fZn1XvIB4DxEY0E4FcAFHNSJY6VJlFCv2uRwyQGdOgMQi0A4GwSONFDUBP39jYC-lEwGpg-QfY5J92Gr0xCPAIe8H6iOFlQNQ5xEQBARl_R4iD1SYCrIDshBGaBshiCWJgOCRV2BKJUYtD1ExbAhxvU3WcPkBPwSNfiST8nkhybfYkRTEm4C2tIvaNTgnNMEjJceijOR9MKZXFpj4Hhxq_t4Yk6sKI17jT6R6x5JxnnkHJAISwx79gRis2RjI949V00CyZyjBHDOSa6NJu9PkrMqfs5hsIREXPorpu50YHxvO-aPP58L5GQvRe07Fu2Mn2Dmh8lqLIOB6ojFRuaJT2ncPCmS9R2FoQjwucA8BlIoGBngauBCqFy1OOwZ42Z8htMrOtfw-wGrtA6ujEBoprLnnct-fCAFozQXTOhZrA6iaVnf1ibFp88wYLrGQpqdC2FTLaW70K8FszeZVDZaIgQPLMB_NUvIMCx7-qLBHZ25J07Z76XNeswBtBlKQPJ2jnHA7NdHgMvpN1wAV8qADPIwAi8qACztQAb6aAAs1QAAPqAGnNQAhdEE8ADD_gBCm0AJDmgAV-MAHtqgBlv0ADnmcqLD3agAi_5kP2hWuHDzhFsT4gMjzJscw0bQ2xt7LYdao5STkjSxRBNTiC2HsutQKJQpOC0doB2L6_h-mJHjbrZH5tP66yUFDsrt6ZyW4sIa9-K4Lswe4_B9rYMK1iTQLI_B3QdSGKKaeulXrBFXBEWIpUr9JDsEAPRmgAyFUALhKZPABoyoAcyNAAyEesGXKQw1yIUVcETGRY-o8AHbxgAj6MACFugAX1MAClpgBr60AEueTJUAa-zVo7JPi0ZxPQOX-PgAEI0APlKzPADAMe33X4SPGRKTQIGJ_fB_sEAIyagBSWInwkxyil5jCeEDMHraC-sDcSOBvvASB8LOtlMeqa8S_7_S7S8t_oaDXW6P2NjYpS5fNPZ03rIGrgwM440YRtbtoMuMYA4NeMVIGYP8bsYAv8y4rg4DqRECf86k1kkEUE-l0MQg7AkQ91GkxxcFA8SlRwy4AA1cXdjMhCHdgVuBKFIKPYQGPdYDIMJIRafXhXOVwIRSwXhbmBELuW_GYD5ZCZAyDIiNA1ADjD3SAybepasPbK4D1JzdePfNeRTTrI8e_TQlcOKCiXQ0Q9YZ_BzIg19RGMOKUN6MmDSTSLA8gRgMUekZGNZAZBsbKIKCaf_frQAwbYAqxUA9jZwqwvjdYTAO4K4PtOgTAQdEdDpRHM2IlWjK4YPRhJw0OZGZaHyVOGKDkFhcgr5KgqABkDIlwggabK2A3aOXDRdRXAgJOIWIiEiLIDI7_VAYo0okIrIhsD1BggoK4RGKAIiAuQQ-cIwgufmCQz_QoriSzEzFQsWNQiY87UOHQr9GY9o-NAwoiFY2mEtasF3asBmPbB2KQyA0hEzMo0I8AibeDBsCAqA9AA7ZpNoTMJohAyAiMEKF46_fXccD45dALNEGAX46omABFAQaCVLXMQEr4oYoiPVChIiNdDdAgT2DLGsKgZCX1XoUJF0AAah8h6kU1vVxL6DDHmxNhgC0NmIB3VTFmxJoA-ApMJOJMU2f2d34xgDuCROOL-P5jOJgEnQSBnW2E9h8JPyG2u1sW6KmHG09140BzplR0ADsPQAXflABYOUACx5FnQAaojAA15UAAjbGvDnFcA5ZCRwHE2zN48k_EmgRTT7CMOwKxSadgQDIteg9mRg42EEhaS3d3MAVAGHIDEDElGsMlKXTxH2Bk_VEHfmK09456Jku0yks7IHTgZoZ1RhPNDvLNQtdMyHZI7TfNbNaM0iJ3W-OVJ0l0j2KCD0_jZmVmb0gYw0eINLIOSs53Xed3HgxTZ3cMiwJVN5PAVVefZU82eMy0207yZM20lk-0tFOg7OEHYs3M6fQs-lNcnXefMc6JfsqsjMmstGN0hs6EefZstuJgts4Y7oTsg87s_VCYIQMYdgoUA8o4rk19Xkz9BmNQoUkU6dCUcU1zFcCEjIaEiidABcyk8aakxTFMmCtk3qRTVHQAUDtAATNKpyJxXBBz2yQpoE3LCxMwIt9TUNW1d1pmPNdPrLQU9LfLLGExgDGGn0fDUPmBEg5EvJ9JvI7I5AO1t3A1_L-J2LVQ0kArFIxInIsHAqhJhOgrxNgoSxBIQvnMUuQpJJXFR0ACCzQAHQVsLcKsz8L1LCLlyaxjLWTmTRKKL9iVxqK6z3S6KlgGKS9mL2BWL2hRLOLuLWyES7z-L7MlghLqMDk1ixKKIJLgLKUHDvCj8wzhtJDgjMj5S5CnjsjKiaxUdAAjA0AFhNAy2mEHAAQlksgqIgUssqXI9QsFR0ADTMwAQmsc80cutugadAAUvUAGmvQAZ2Uc9qdAB4tMADgVcnKnMWVwEYO2KYfmEM4_S3a3TM47Eikyyq1Y9o8YBaiqkOdHZlQDOHfrBHcDGat3Okx4ybQKxHPkqolyf3cNeIewoFD4yKnYfnPAoFKasM6SrEgU6c60nyRCxag85JBlAgAo8o24xUy_DFIqtciPBHQqsk0ioi8WEuNZMa8cSa7a4_PapHD8sWEHX6iq2cnyBM20hGlU-PDHNPdPQnInanTUoagnJ7NaxctDNy77AQa4rIp6t2GJK6ovKAW6pyV6_rLiuVNc_PQvCNPA4TLrFRc3dgLsuPdgQAIM12dAA-6MADt_QAMLk-F_V4hqdABMJUAA28wAEujabKd6a4ysy4bFr2BOUoadaoASbxZUdRrxqJxkIQydqI4A59qHzDtuFSLxo_Lfa0J5w0sqqnb486a5UkafIXbxwLLFyNrmqPaMbI4fbd5ZrHz746SS4OTTVRbREQ0C85coACUQ9rY_UDZ4g-ZkI3VqxzqaMXIugGCAKp1JKVxBa4B8iZSak5TQb5D7j3rqr49AAmNMACNrQAKDk6rAAHU0ADtjFnRktS_GoklCnGrMguqRWXWRCNR24HLMwqu2quh2sy3WVHZW-nPsQugoanNCwAMBcp6a98qa5yL5bM7MU6SeaI1-byBO7Ky37UdAAXt0AFLjQABfjc8MV3c0bYdU7vasb35TV-Yy6cyxaS666LAG7ml3AhDW7RSorQLaY8amaV7NLaZUdnzRh-lzywk7LRxnSTzaLbVnL59XKWLdz2gxjYBvKvSrzBj2z_KBKgq45P0KJUTUUnrO6_DT8AiMq6ZVzy7aMcAUHt74hd79dlG-aHCbKbdoRby5qIwD75HtMI9VHAGgHAAeBXAeLndvRvhzTrgYxQc2zpWvwezkIdguId9pfo_LzpXCjkPoDR9SKUUavq3uutLrdq4jUbCe_rQbls_Xdz6JbMSjyVq36JnALhcpSaWwYoLh4N0QXT_B4NGKwd5jd3EMCYruhttsMeCc3uLvUZ-iau62lXnG9ILmUJPryTXnjW0MRTFlEuLTNlML_iUBACam2FcDSDZWoEAl0BAgMDAjpX4FQG9EZCQHYH4B-GLGqAyHNB_DJDWbNn4EhPyGoH4CuH4BChwCuZChqnWH4HKHIH6HkfOY2ZAE0nWjwlgGhCwG9AOe_LZkSFzDyDvVNElHNC2b-FLDuerH4Gk1ef4FbTZRhYsAeZ5JiPhAgHgFeY9X4DBdEHWf4AAD1N4cAAAOHANKFFmsfgCSBFkAIlpMHAAAJiuZ6mpdRcEE1EtEiHpZJbSnJcpf4BMISQbShdwBaQgBSGmdQFmZgS7UJhAFoB9CyHOc2dNFoHNHxfNFmBmH4HkAUA_iAA",mdxType:"Playground"},function(){return Object(s.b)(function(){var e=j({url:"https://randomuser.me/api",manual:!0}),n=e.data,A=e.loading,t=(e.cancel,e.run),r=Object(i.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(s.b)(c.a.Fragment,null,Object(s.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(s.b)(a.a,{onClick:t,style:{marginTop:16},mdxType:"Button"},"fetch"))},{mdxType:"Demo"})}),Object(s.b)("h3",{id:"\u8f6e\u8be2"},"\u8f6e\u8be2"),Object(s.b)(l.c,{__position:2,__code:"() => {\n  function Demo() {\n    const { data, loading, timer } = useAPI({\n      url: `https://randomuser.me/api`,\n      pollingInterval: 3000,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={timer.pause}>pause</Button>\n          <Button onClick={timer.stop}>stop</Button>\n          <Button onClick={timer.resume}>resume</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:i.useState,useMemo:i.useMemo,Button:a.a,Spin:o.a,useAPI:j},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWGIjyONCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGKRZFwUEgKBo9AEVh4iuJMQrNzWtYW4X6eoFzqNcaBxooqiaKjWmtbx5aI299BmfYAAff3WPkDlQ3gUJkbsQP2AAbQAXQ5GOQrjgOg-AEOcHt6ALct2PfdIuOc5Ft9c66Ag-nMN3c4TA7q9rHi-MatBVJnLa2Y5md9qz8XWO7-QpAb1Ba-rxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQ_brct0eOOZah7CgWJti27mMhwOKKP26-iKkMfOOHuv9_H8wj5PnZz_5S-UTX_a_4zAfgfIeu8tav04nsVAx9T7fx5mHekR59pdEQTAYBb9n570kI_Ce082hYxfpuXeJcRbgy1mXCutYKY0XYEQ2m8gyG1kkJjaGZgvwgDgIZYyRFTLmXDLgAgWgKDAX0AwNS9oTJwESE5OyOAPSSOkeQP0fIDaI3Kg0aCA44CMEsATdYfQe4omnCkFSFg15kzgN9K4YoACODIUT6xeKY9gURUChHiFY9gXhKDklQM4nWJ8Zz61oIbDxVw3FEECAIZxR4JhOE8RGAxVwjGcz2DMCxnjbH2III4ggi18ZVUiNSHRYhnHUGcKEcgCI4CWKuBGdAVxLD5OWqwSgXAymoDPAIIQAgEndS6T05p7BWntLMODMwsApiYkoB4eIVE4kNImkkuexiljmI-rU9gWT4A5NUnktGmiin3yRKUxycN7QM10JAFI2yXI-QjLE4YizPYhFQIkIZNMLDTNmVAeZTzxqPKcCpeQKkzAMwFrpHyOjxonIjOYq4GitElI-esBmXQ7E7L-U4ca5jlajn-dHb5cz8XYujjieWIwcBgFHNNZxFCBDmAUU5EpVcaz-EURNZpwtnRjEOUQYpujvYoJ8awGASwujqC2PsgpnzLbouyVih8uKDFrPSTgdZtsSG5xwBMOgEZ2UyJQWjWVddhVQFFRGFB_44DMguldG6zQrWaGZE9Hy7QSbvWoF9X6TqbWoFRlcFBH4wFW3diLD40RpoRm6DKkNFgJVSujcGsNdMQ7ONTRyIuMcABSzgdQADkcApJnBAMAiQ4XpI5IXFcJqayuPcT3XF9b4hFwsAEvWBsjaNrVe2oJnaW3C2oAMoUVxcVDu6UKVtUCKlVPgPcNJBB1WoBndUuARclDrGTSCs5WAxIIyRlMCFKl2GcKMkyoyFkBFCKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoCzJ2N-4ipFaBAbFGAIDZ4wDUtsnRN09kXygqcnBGpVgf4CBKb5WK_Qja0AnFnFus4fIhSQ22nDWRjjznguNEjjkyNsAo-QDwdSIxyJwK4AK86kTxyGXygVAdcjhkgM6dAYhFpBzcQkcakmoCkb7ORvDKIONTGI3J_sDG8MXwEPeGjcnhpoklEKCMTG6m8ZlPxoOyEEZoGyGIJYmA4JFXYBEqJi1a0TFsGHKIaACjjQc_BdN-JPP-eSD5ELgWPNwCLaRe0YWqOJAiwSHV6GdNxcc4lzzTHxpMeceM6sgDxovNreSk4lLyDkgEJYH--wIyReSzze8ya6Z1a06l9gtHaZ1a6N5wj406vhfWNu_0sUwhEUKyi2mJXRgfAq1Vo8NWWspfQE1msXWCO-fND5LUWQcD1RGKjc0QWotKeFLluTKDQhHkK2xjjKQuNvJ41cPj99dECaszAYTuZY2daSydlT7Btu0F26MQGgWptldm9V8ItWkuteW4F0tE06tMbc8Lel5geWFP5S9hsZrRXGt3othrOQfLg6LaOObMAasGvIJygnKaayI5h5ljwqOGfNaS0x1jcj9WcdTrHBOK266PHw6g9ggAr5UAGeRgBF5UAFnagA300ABZqgAAfUANOagBC6Pl4AGH_ACFNoASHNAAr8YAPbVADLfoAHPM42i5FTAVldcLDtHzcOPH3Qu0MjzJscwvaUjBIyF2zghJRyknJGNii07KmrvYJdcdPTOCoBROKESIQ7BIinVrIXltGFayUEdrzDtCPp4sGmlcmf8PlwZYJ6zImztjJ3WJNAIS1HdB1OkjZmHZXNqgJ47xvilS0MkOwQA9GaADIVQAuEqq8AGjKgBzI0ADIR6wvc-9CZ38Jl2om95F4AO3jABH0YAELdAAvqYAFLTADX1oAJc8mTLvD3OhJiymloxGegNf_fAAIRoAfKUjeAGAYs_w7el1P6ROgQQy78H92BABGTUAFJY9_GvYbRSeYZzYQWee5G7TjK4bjBOW_Npe_MFW2KYeqNecJOA8bY1IbMwaA7ofsI5GAMUMvVATDBAuRW7e7RIHjA5czF7N7ITGzUTFSBmMg7HCg0cCuK4Hg6kSgiuRgE5GFKRGRF5GTJPV5BLWvdSevDIRvLZfghlAANXiAZDb3WHbgShSCuG73FD8XWAyB6U8S_2cXzlcE8UsGcTiCcnnDwLXjpWQkEJYL4KoOhUs3YJE1OWrC0yuFrUAWcJmECwuyPFCMCzvm6hwLCMG2BQUPtH3QjilDejJg0k0kkPIEYDFHpGRhhTeQbGyiCgmkQLu2QIe1QIKWezQTyNSLs3WEwDuCuCfToEwFfQ_TuQFwtg1TjyuGbwsVyPDmRmWh8nThig5GsTUNQE0KgG0PqNGKwxtjjymBjiU1A3WlHBTn5iIhIiyGGKoLmIWJGIIDEAbFrT0IKCuERigCIiLgcIRB7jiKLjRFKKEKIhEIZSLkCOWJFhCNgLXinQiO6g-M8IrinRiNCPXQtiL2rAZi0ydk-I-x0XQ2GPyLOLYMr1s0SV8OyBW0uTaEzF2L4LAAjBCgJKwNj3HBJPA1qzRBgEpNWOhFFQEGglGy-w0jpNuKImTX0SIigxgwIG9gmzpioGQkXV6G6RdAAGofIeoEc9kPg-gwx_tUQGRwiZi6dvstZxSaBlTpTMw5TepAshtC97MYA7g-T4SqS3ikSYBf0EgANthvZyiGDHssdilFipgfDsTRN6c6YRdAA7D0AF35QAWDlAAseWN0AGqIwANeVAAI2233NxXDRWQkcAlOyyJMlJVP0ECyImFLsAKUmnYDYzXXYCuMSnGAZIWnT3R0NH9TdK1RrB1Q93qT9h1MtiZzePTOJOej1OzMNP2VrS1iZz6Ki3KQvxqTZztwXQ2SXRXTnTbNIgL1IRDXzIjELK9iglLPs2ZlZnZn0JuPiDGxDhXML13jrOsMC0LybIsAjQICjTMKFADM7OaEtTTKzO8j7KzINNVOnOrlHJb1tiXS_3_LrjHJAr_2jT_zPJrBLy1nXM3Imm3LkTLKfIEH3I7gMMNGPO6FPOvLgsJzwCEDGHQoIrhPNMoytL0ypIKxJMdP_QlBdKKxXBgFZPZIonQF_JdB8nVJgEC37O4qNPlMCxF0AFA7QAEzTNdFcVwmctMhKhzhZ5KpTVTos15Qdi8VxEK0ZiydzoQ_9wkYAxgv9HxAF5gRJM1yyDzricK7i8KOQVts8eMaLmSYj7SGLnSRSXyLA2KMgOKiIuKVKeKqyNSUyfygrhKTSVwRdAAgs0AB0FaS2St85SnMmgMC1bdDBSq-DkjS-hLS0cDcnSlCotJYdCwy4yqC9oGIiyzCw82yk8hy3LJYZyujQsZkkE9yv9TymnMougzjKYz0--b0rEj7DgsYvRWmEXQAIwNABYTUStpiZwAEJfK2SOTArUrFKw0RdAA0zMAEJrGfUXS7bobXQAFL1ABpr0AGdlGfLXQAeLTAA4FTV012FlcBGAdimDeO53Y36tNKSqR0yois2vIS1JSsHIQSOs-t5zu35x43TxLzrPe0-wwOrCcoThcpciUMXyyI5Xoq6qYttyTw5U-voNFJFlTOgU_J8kEoBoIsmVL2mIxJGsRoIqWogo7350Wp8wHL_L-KBv-xereonGQghvoOhsF3IuFiZypo2q_J8m7KzPSsDP73FzH3HwV0Vy1zDMevl0J3-ulp8kx0pww29OKPZ21OWgxq7SxqciJv6tTxrAgvn37SgFkJcwyDttgpF0ACDNM3QAPujAA7f0ADC5FxdwBtLXQATCVAANvMABLozWjXbWhnJnTmhSyPKPICuPZWEO-IBWkWEXfm8cD6tjSGqOIOGGgiumJOgG8aHk_i3eNCecMbYcnO_vLWkNMuGFV68cEG1SkE4WvnaOUu2u4WeC0vShMuU0rNB2nxQJb3J21VCxDOtxFtQW1Aatasa0lYlyLoPQzqp0vGlcG2u7Aa2o9E1Ixmsa7ymsEXQAJjTAAja0ACg5XawAB1NAA7Y2N2FilsHPYGNIVIlrfMnt1j7RCS7WzosBZrTqiw7xAcvv729r1z7CnoKC1zEsADAXB-7feauuQBXK3OYe-NLUi2-IK28gA-uAFc4ekXQAF7dABS40AAX42fMNOsgunnEW_usW4vLNN4ueucx2oB-IVeiwdetqlyR4-cHexinYLyjsm2CU5O7-0S_vCYEi15fSnpfKgsoqks1C0qgy5zIy9gEy9oER2AGqqyrCo8uymspqgXQRiiQUxNfet0yoxg6oiakcv-8Bq-BBwB33LOnmkWAhqAIh7B0haECxsB-eyBvxxW9gahwAHgV6HS4hbC6WGS62Gw08tebKEWKGcP7VSv6RLd4sGyHx6VwY5WbM6oAuHgKeGfHKnl6lgAmiH-H2BBG6zLjrLKyNi_wKyUgi4yq54dt0Ki5rDkkQM_xrCHj3AnjXi3DZzgK2a7V_7p6F8_cfVw4rtA15wDyfj0MgjhZAFgT1mxVhYYiYSEjID2EmpthXA0hrVqBAJdAQIDAwJZV-BUBvRGQkB2B-AfhixqgMhzQfwyRPmLZ-BWT8hqB-Arh-AQocBYWQoap1h-ByhyB-g06oXvmQBNJ1o8JYBoQsBvRgWqK2ZEhcw8hfNTRJRzRfm_hSxEXqx-AesMX-BL1rV6WLBkXLT2j4QIB4AMXa1-BKXRAvn-AAA9TeHAAADhwDSnZZrH4AkmZZAFFaTBwAACZYWeo5WOXBBNRLRIglXxW0opWZX-BBsxkT1aXcArkIAUg7nUAHmRE71CYQBaAfQsgoWfnTRaBzQhXzRZgZh-B5AFAGEgA",mdxType:"Playground"},function(){return Object(s.b)(function(){var e=j({url:"https://randomuser.me/api",pollingInterval:3e3}),n=e.data,A=e.loading,t=e.timer,r=Object(i.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(s.b)(c.a.Fragment,null,Object(s.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(s.b)(a.a.Group,{style:{marginTop:16}},Object(s.b)(a.a,{onClick:t.pause,mdxType:"Button"},"pause"),Object(s.b)(a.a,{onClick:t.stop,mdxType:"Button"},"stop"),Object(s.b)(a.a,{onClick:t.resume,mdxType:"Button"},"resume")))},{mdxType:"Demo"})}),Object(s.b)("h2",{id:"api"},"API"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{}),"// \u4ec5\u9700\u914d\u7f6e\u4e00\u6b21\uff0c\u8bbe\u7f6e\u53d1\u9001\u8bf7\u6c42\u6240\u4f7f\u7528\u7684\u65b9\u6cd5\nconfigRequest(requestMethod);\n\nconst { // \u8fd4\u56de\u6570\u636e\u540c useAsync\n  loading: boolean;\n  error?: Error;\n  data?: T;\n  cancel: () => void;\n  run: () => Promise<T>;\n  timer: {\n    stop: () => void;\n    resume: () => void;\n    pause: () => void;\n  };\n} = useAPI(params)\n\nparams: {\n  url: string;\n  options?: RequestInit;\n  manual?: boolean;\n  pollingInterval?: number;\n  onSuccess?: (d: T) => void;\n  onError?: (e: Error) => void;\n  fetch?: (url: string, options?: RequestInit) => Promise<T>;\n}\n")))}Q&&Q===Object(Q)&&Object.isExtensible(Q)&&Object.defineProperty(Q,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useAPI/index.mdx"}}),Q.isMDXComponent=!0},"./src/useAsync/index.ts":function(e,n,A){"use strict";A.d(n,"a",function(){return I});var t=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/defineProperty.js"),r=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),o=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js"),a=A.n(o),u=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/toConsumableArray.js"),i=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),c=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/classCallCheck.js"),s=A("react");function l(e,n){var A=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),A.push.apply(A,t)}return A}function g(e){for(var n=1;n<arguments.length;n++){var A=null!=arguments[n]?arguments[n]:{};n%2?l(A,!0).forEach(function(n){Object(t.a)(e,n,A[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(A)):l(A).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(A,n))})}return e}var m=function e(n,A){var t=this;Object(c.a)(this,e),this.remaining=0,this.delay=0,this.cb=null,this.start=0,this.timerId=0,this.stop=function(){window.clearTimeout(t.timerId),t.timerId=0,t.remaining=t.delay},this.pause=function(){window.clearTimeout(t.timerId),t.remaining-=Date.now()-t.start},this.resume=function(){for(var e=arguments.length,n=new Array(e),A=0;A<e;A++)n[A]=arguments[A];if(t.start=Date.now(),window.clearTimeout(t.timerId),t.cb)return new Promise(function(e){t.timerId=window.setTimeout(Object(i.a)(a.a.mark(function A(){return a.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:t.cb&&(t.cb.apply(t,Object(u.a)(n||[])),e("No resolve value when pollingInterval is set, please use onSuccess & onError instead"));case 1:case"end":return A.stop()}},A)})),t.remaining)})},this.remaining=A,this.delay=A,this.start=A,this.timerId=A,this.cb=n};"undefined"!==typeof Options&&Options&&Options===Object(Options)&&Object.isExtensible(Options)&&Object.defineProperty(Options,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Options",filename:"src/useAsync/index.ts"}});var B=function(){},d=function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function I(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(s.useState)({loading:!1,cancel:B,run:d,timer:{stop:B,resume:d,pause:B}}),o=Object(r.a)(t,2),c=o[0],l=o[1],I=Object(s.useRef)(void 0),p=Object(s.useRef)(0),j=Object(s.useRef)(!0),b=Object(s.useRef)(!1);Object(s.useEffect)(function(){return p.current+=1,j.current=!0,function(){p.current+=1}},n);var O=Object(s.useCallback)(function(){var n=p.current;return l(function(e){return g({},e,{loading:!0})}),e.apply(void 0,arguments).then(function(e){return n===p.current&&(A.onSuccess&&A.onSuccess(e),l(function(n){return g({},n,{data:e,loading:!1})})),e}).catch(function(e){throw n===p.current&&(A.onError&&A.onError(e),l(function(n){return g({},n,{error:e,loading:!1})})),e})},n),E=Object(s.useCallback)(function(){b.current=!0,p.current+=1,I.current&&I.current.stop(),l(function(e){return g({},e,{error:new Error("stopped"),loading:!1})})},[]),Q=Object(s.useCallback)(function(){b.current=!0,p.current+=1,I.current&&I.current.pause(),l(function(e){return g({},e,{error:new Error("paused"),loading:!1})})},[]),C=Object(s.useCallback)(Object(i.a)(a.a.mark(function e(){var n,A,t,r,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,A=new Array(n),t=0;t<n;t++)A[t]=o[t];if(b.current){e.next=4;break}return e.next=4,O.apply(void 0,A);case 4:if(!I.current){e.next=6;break}return e.abrupt("return",(r=I.current).resume.apply(r,Object(u.a)(A||[])));case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}},e)})),[]),w=Object(s.useCallback)(Object(i.a)(a.a.mark(function e(){var n,t,r,o,i,c,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,t=new Array(n),r=0;r<n;r++)t[r]=s[r];if(o=p.current,A.manual&&j.current){e.next=6;break}return e.next=5,O.apply(void 0,Object(u.a)(t||[]));case 5:i=e.sent;case 6:if(p.current!==o){e.next=15;break}if(I.current=new m(function(){return w.apply(void 0,t)},A.pollingInterval),!j.current||!A.manual){e.next=12;break}j.current=!1,e.next=15;break;case 12:return e.next=14,(c=I.current).resume.apply(c,Object(u.a)(t||[]));case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}},e)})),[A.pollingInterval,A.manual,O]),y=Object(s.useCallback)(function(){p.current+=1;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return A.pollingInterval?(A.manual||E(),w.apply(void 0,n)):O.apply(void 0,Object(u.a)(n||[]))},[O,A.pollingInterval]),h=Object(s.useCallback)(function(){p.current+=1,l(function(e){return g({},e,{error:new Error("canceled"),loading:!1})})},[]);return Object(s.useEffect)(function(){if(A.pollingInterval)w();else if(!A.manual){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];O.apply(void 0,Object(u.a)(n||[]))}return function(){p.current+=1,E()}},[A.manual,A.pollingInterval,O,w]),{loading:c.loading,error:c.error,data:c.data,cancel:h,run:A.manual&&A.pollingInterval?C:y,timer:{stop:E,resume:C,pause:Q}}}"undefined"!==typeof ReturnValue&&ReturnValue&&ReturnValue===Object(ReturnValue)&&Object.isExtensible(ReturnValue)&&Object.defineProperty(ReturnValue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReturnValue",filename:"src/useAsync/index.ts"}}),I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsync",filename:"src/useAsync/index.ts"}})}}]);