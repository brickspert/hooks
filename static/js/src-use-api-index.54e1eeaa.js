(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/useAPI/index.mdx":function(e,n,A){"use strict";A.r(n);var t,r=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),o=(A("./node_modules/_antd@3.22.2@antd/es/spin/style/index.js"),A("./node_modules/_antd@3.22.2@antd/es/spin/index.js")),a=(A("./node_modules/_antd@3.22.2@antd/es/button/style/index.js"),A("./node_modules/_antd@3.22.2@antd/es/button/index.js")),i=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=A("react"),u=A.n(s),c=A("./node_modules/_@mdx-js_react@1.4.0@@mdx-js/react/dist/index.es.js"),l=A("./node_modules/_docz@1.2.0@docz/dist/index.esm.js"),g=(A("./node_modules/_antd@3.22.2@antd/es/select/style/index.js"),A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js")),m=A.n(g),d=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),B=A("./src/useAsync/index.ts"),p=function(e){t=e};p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"setFetch",filename:"src/useAPI/index.ts"}});var b=function(e){var n=e.method||t||window.fetch;return Object(B.a)(Object(d.a)(m.a.mark(function A(){return m.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",new Promise(function(A,t){n(e.url,e.options).then(function(){var e=Object(d.a)(m.a.mark(function e(n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A(n.json&&"function"===typeof n.json?n.json():n);case 1:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t(e)})}));case 1:case"end":return A.stop()}},A)})),[JSON.stringify(e)],{manual:e.manual,pollingInterval:e.pollingInterval,onError:e.onError,onSuccess:e.onSuccess})},I=b;b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAPI",filename:"src/useAPI/index.ts"}}),A.d(n,"default",function(){return O});j="Demo";var j,E={},w="wrapper";function O(e){var n=e.components,A=Object(i.a)(e,["components"]);return Object(c.b)(w,Object.assign({},E,A,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"useapi"},"useAPI"),Object(c.b)("p",null,"\u4e00\u4e2a\u5185\u7f6e ",Object(c.b)("inlineCode",{parentName:"p"},"umi-request"),"\uff0c\u5e2e\u4f60\u7ba1\u7406\u7f51\u7edc\u8bf7\u6c42\u7684 Hook\uff0c\u652f\u6301\u7acb\u5373\u6267\u884c\uff0c\u624b\u52a8\u89e6\u53d1\u6267\u884c\uff0c\u8f6e\u8be2\u3002"),Object(c.b)("h2",{id:"\u4ee3\u7801\u6f14\u793a"},"\u4ee3\u7801\u6f14\u793a"),Object(c.b)("h3",{id:"\u7acb\u5373\u6267\u884c"},"\u7acb\u5373\u6267\u884c"),Object(c.b)(l.c,{__position:0,__code:"() => {\n  function Demo() {\n    const [state, set] = useState(0)\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api?id=${state}`,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>\n          <div>id: {state}</div> <div>email: {email}</div>\n        </Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={run}>reload</Button>\n          <Button onClick={cancel}>cancel</Button>\n          <Button onClick={() => set(c => c + 1)}>increase id</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:I},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhvYABtFEyPW0cAF1xookisgjEK3zpumGag9BolcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJwW-igK5ikIW57keTIMEiCiBBwI9JFmCBvq4bgABJgBZ2h5GKGLBZreQBY9wtUBc6jXGgLmiKomio1pj28eWiMY9F0j2AAHwT1ivdDeBQmRuwk6Z9mOUZkLOez4BU4D6B3Z9ixGbj1x2fLj3vY9roCD6cxw4rhMDvb2seL4xq0FUmctsl6WZ32zWK5jWQuCuJ3SJdyHY1rKHS511iV_kBfZHHwWpB71BO_bxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQseI8P4_OL2VB7CgLEbYW0lb7S6MPdAUgf7UAPl3I-HFmTUAAUAracsERQH2mg-cUCEH723h7eBJ9zBIMATsLaUc2YEAjOQNGNCADUvUOT7TQOQU0RFOCQMkNAvBX8CFcNwefS-sCd6bm3g3T2msm4t1rBTGi7BRG03kODbcmNoZmC_CAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9FYmx5A_R8j0AIRG5UGjQQHHARglgCbrG1lcFE04UgqQsM_MmcBvpXDFAARwZCiBoqkCDhPYFEVAoR4gxPYF4Sg5JUBpMFAkAoyTaACFYNkq4mSiCBAEGko8EwnA5IjEE6-oSliRI-tE2JMAEnwAIMkl4i18ZVUiNSPxYg0nUGcKEcgCI4A9ImugK4lgRnLVYJQLg0zUBngEEIAQLTup7IOes9gmztlmHBmYWAUxMSUA8PEKiTSVkTTaSEmWewZhRJyfExJgyUlnO8eMoijAkRTMcnDe0DMiIEFyqOaa40IyNOGK8ihSIzk0wsPcx5UBnmovGiipwKl5AqTMAzNWukfJ-PGuCiMkSrheJ8ZMzF6wGZdH6SifFThxqRItqOAl2ccVPIFTy7OOITYjBwGABFeA0lSIEOYRxTlJltxrP4JxE11ma2dGMYFRAJn-Jjl0OA-TWAwEVjAdQWwCCst4ROPp_zuUPj5drTp3ycBdOoHAcRHscATDoBGDVtiTVoyxV3B1pqoDmojCa_8przAXSujdZocbNDMiej5doJN3rUC-r9NNCbUZXBNR-fBC1y0fGiNNCM3RRnhq7l0a1kpa1lvtRYL2aS6ZezrkzAAUs4HUAA5HAHyZwQDAIkel3yOS1xXA2msGSsmrz5Uu-IvaLDFMATOMpGRKkro9Vu0pbj90br_icoUVw-XUAvQIM9My5kLPuF8ggnrUCzPmfAOAvalDrDbaSyFWAxIIyRlMSlKkNFaKMsqoyFlDHGKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoCPJ2AR4ic8LUaTFGAcjZ4wAytsnRN09kXxkqcnBRZVh-QZEmb5WK_RKm0AdVENABRqmhFqRkcaIV2ObsE1kY4854ISak0cHysnHLybYIp8gHgrgx3sTgVwAVn1IkZrnNG-rDWJ1yOGSAzp0BiEWsnTJCRxpuagHJvsCnhMs2FKpupMnvP9h08JmIR4BD3kC9JjT3nhpoklEKah-mtVWZlDZ5OyEEZoGyGIJYmA4JFXYDUupi0F0TFsGnUTA9Zw-UK_BLt-IqsNeSPV5TiQmuVbgKO0i9p2tFa6wSf1PGos5AG41lc3WPgeHGnptJ1zqwomfkiu1dMJUnCleQckAhLA8f2BGabEWMj3jbXTI7o37zBam8NroNWCjjWm61hbIWwjsJ8hQhdG3RgfB23to8B2LuRdO0Nqrd3A61fYOaHyWosg4HqiMVG5pms9f86k9YAH_TVhNZJutE0jMmZSGZ1AiQLMciuNZ0F_jbPZZgA53M9abtVbR-NWHtB4ejEBk177W2_v7fCId4bx2xtnZrBOia029PlckaOaRuqxkGqpw2E1Zq60BPtUDk7428yqB-7C_7MADvBpoZ98t4vBdVal_xiNKOZsRiM0G0zidk5k9F13R4kbcfsEAFfKgAzyMAIvKgAs7UAG-mgALNUAAD6gBpzUAIXRwfAAw_4AQptACQ5oAFfjAB7aoAZb9AA55uWiwKvo0wDVTb9oQ7hz5_Nec-IDI8ybHMEendJ7ey2EoaSck7CKJ_w_U-9gl0b37KFJwP2tAOxfX8CEEnZ765NY9son2Shbfg7EzON3nsV-z7z7LxVdmcuOZe1cwDYk0DlI8d0HU3zul8fDWuqAOS8kFKVPIyQ7BAD0ZoAMhVAC4SpHwAaMqAHMjQAMhHrD14pC7oVJVIlaSZ1IP4e6AB28YAEfRgAIW6AAvqYAClpgA19aABLnkyO-o-l-i0q8msmjBcugFAU_oAAhGgA-Upp6ADAMVgbekclcLemckQSQewIAIyagApLHUH75Y6KTzAlbCBXwfYE6mZXDmaWajLMHkrepTD1TPzVICGrZhqY5mC8HdD9ggowBijNyKp8ZCH2KE7E6k7iHLSU4wA0pZb2a5ZOYqQMzqGK6aGb5BQ-YaFaEtxgok7LQ-TG5pajKeYhB2BIjsZQpjhuIn7sCuGKoABqVeZh1O4aEC4muSwg9-6wGQByOSt6aS1cOSlgaSWCq8shMw8qyEVwdh1IERqA5h2-dOVhEK1YwuM8K4y2L8_Bz8TWOOR48hbRK4cUFEXRRRGOJKB-8MdOoGhob0ZMGkmk1iKqYo9IyMtKHhaqYATh9u-hIh4-RhQKGWoKcxGcBA-W6wmAdwVw6GdAmAWGuGLkPkFm5cXqfsVwZ-USjAexyMnhKcMU5O4Rjh0RUADILx6cbx1uvsLkzMlGSwsKnMqsREPMtAAJ2hqAvx_xrxBxDYC6CRiUho8QREva-R_RvaSspROxDhCJvaDRwJdMzR-JMu9InRzh9hFRZ6vRRE1Jii5cnabK0h4wo2wcDhYAfio2AJ8xBxNOlhjmDYtO9O6AouDMVAyEUw0JfJfMMpXJYmCp1GdOh2aIMAKpQ-0I5qAg0Eb2DOGpYAEYiMUAREbagSRE9GjGVCputMcpNAHwfQYYUwdCPkPUTWaprp-yLoPkqIDI7RjhPh6uHszpr6vQ_pmYnpvUTWmOHaBWMAdw1p1Y7KyEvJRGCQpG2whm6xROohJOZOFOxJQp-xopO-eWYaK4HugAdh6AC78oALBygAWPLp6ADVEYAGvKgAEbbwHZ4rgZn_xtCZg-SRl-nulNawoRh2CjKTTsBGbfrsAYkpBXBBndBewr4KrmArFrHGama-rzkBqoARjVw1n2rm5KyODyneTPRjnRnunS7tqcDNDTpRJvpd5fqPk273E9YPqfqLInliwr4z7lpTkznRxQQLkFZiwSxSwJQrlYmWnrkcjAUSL2pbnHBizT4VpfxVoEA1ppED6M7nkvmXnDkKm3nkXjn6Bfntzm4_lvqMEUntwMV94HK1r94CCoXdqgWjjTloxzlQXQicWwUjwIUWnsIbnYUdrbwYWEX1KawcnVjz7HE-rxZcnNFZnEa5kxxrY1gwAGlGkUToDUUjnjDalNZ3lukuhxnem1lP6ACgdoACZpseoeK45uwupltqzFFgnl95x4zRXOK46-lC_Fs5kF9ii58l1SMAYwt6j4zR8wIkHIol8FVwElyFou8-ZO6lepzJeOFE2ZJGEoeZjpdMBlGQRlREJl_lZla5llVFtVHpXpTWHugAQWaAA6Cq5e5S-X5dZTQLRedqNl5TgPlUFYok0XxeBRNBFaOksNFSVrFewPFe0PlclalYkRlQtFlUsDlVpiCVMB0QVYRtpSVUGjMSbsIUTl8aYeWQsRYVWU5meXTB7oAEYGgAsJrdW0zm4ACEFVhpxpNV_V3lC6FgHugAaZmACE1v_p7keOwPHoACl6gA016ADOyv_nHoAPFpgAcCpR6x6ayuAjCByHXIS7kGFr49US7DVNWDU1gYV9UxmvpHW7mO5E7O45woUJkrgYWSlWELa7W5y5UuRH57rxDTGaqKlFU6UrjeGk37nPWCyDlXlmVWUM3YW3IOoEC9LCmVk1G76ay_UMXX5s0_W-nU0-W02ji0qE3jhKzM0GFs2u7YUhUWDm4q3uk3k-RkXyk00vVP7e6f5f4h6h5x5Nm43B7bz03u0-Ty4G4CB3UHFF4-wULC2gFQBi1OSy3XWT41gMVAEgH7r-HgFqbZ3cWP7sCABBmlnoAH3RgAdv6ABhcuku4MunHoAJhKgAG3mAAl0aHTHuHSRRNKbcDT3r3uft6hbE3fED7YLB7gTUTROCTQ7vbdnI7Wbikl5eNBldJfxPOOwqDVPU_mHeWk3FbbPZHceEzQvU7kvbnKXc7ahDLgiRrQmb2ozLnfktusAY3lAO6m-dforMhHOtWGmfTFyeAnBVpTmWdSuJnT6qWRofHTrVKZ4eGXvewIAExpgARtaABQcpDYAA6mgAdsbp6axu02UtX60vmv0lIN7lL7qT0u0vk_WG3j1QC0M1ge6V1J59hv0FBx4OWABgLtg_AV9V3IFTfbJaGSnfuuneQNA6hbfR7oAC9ugApcaAAL8QAV_BhbbRfazVfRzcFc_UrN_d0qNVw1QyLVAAAxYEAwdasPLFAOA8VTsLpfLcA_KWvbZa1U_hMEIGMO4MJQcpNVQtNYJZFfNZxTFXFZxY-PkdkK-BtZiVtVJRjvzVYxRHaTaondA0WVsc42LuQyPX7MY5Qx_dQxPebS7Z_VI-NTPtCEhc-RNAw_kz1tfiwwo4o4ADwKajFcmj9iLNWcLu19Tt-1dMGFZVPsxDsZpD9qIjTtT9K4L9jTY9mS66L6Rjedn9f9XEg-JTadF1Fj7AVjGF6JcFiRzsf4y5vaC1pzOA8lva1cwSlGOA1cuJ7g6CBJJRKzo9RtSaFD79-dvYBa6ccNJa84cFZJo2jRX8zRZ6R1TJxpP67JQxqAGiTU2wrgaQ8a1AgEugIEBgYE4a_AqA3ojISA7A_APwxY1QGQ5oP4ZIxL5c_ABp-Q1A_AVw_AIUOA7LIUNU6w_A5QrCEA-TLLpLIAmk60eEsA0IWA3otLSmZIlAiQuYeQD2poko5o5LfwpY3L1Y_ANWQr_AcG8aWrFgvLKZ5x8IEA8AQrC6_AKrogJL_AAAem_DgAABw4BpRGs1j8ASR6sgAOtJg4AABM7LPUnrxrggmolokQvrTraUrr7r_AGOVykGGruAugkAKQGLSL2g2LZieL_AtAPoWQLLZLpotA5otr5oswMw_A8gCgSiQAA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=Object(s.useState)(0),n=Object(r.a)(e,2),A=n[0],t=n[1],i=I({url:"https://randomuser.me/api?id=".concat(A)}),l=i.data,g=i.loading,m=i.cancel,d=i.run,B=Object(s.useMemo)(function(){return(((l||{}).results||[])[0]||{}).email},[l]);return Object(c.b)(u.a.Fragment,null,Object(c.b)(o.a,{spinning:g,mdxType:"Spin"},Object(c.b)("div",null,"id: ",A)," ",Object(c.b)("div",null,"email: ",B)),Object(c.b)(a.a.Group,{style:{marginTop:16}},Object(c.b)(a.a,{onClick:d,mdxType:"Button"},"reload"),Object(c.b)(a.a,{onClick:m,mdxType:"Button"},"cancel"),Object(c.b)(a.a,{onClick:function(){return t(function(e){return e+1})},mdxType:"Button"},"increase id")))},{mdxType:"Demo"})}),Object(c.b)("h3",{id:"\u624b\u52a8\u89e6\u53d1\u6267\u884c"},"\u624b\u52a8\u89e6\u53d1\u6267\u884c"),Object(c.b)(l.c,{__position:1,__code:"() => {\n  function Demo() {\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api`,\n      manual: true,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button onClick={run} style={{ marginTop: 16 }}>\n          fetch\n        </Button>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:I},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGLxfFqJUFCeIrlRBkdd1haxfp6gXOo1xoHGiiqJoqNad1vHlojT30GZ9gAB9fdY-QOVDeBQmRux_fYABtABdDko5CmO_YD4Ag5wW3oDN83o-90iY6z8W32zroCD6cwXezhMDsr2seL4xq0FUmctrZjmZ32jOpdYzv5CkOvUGryvGHYm5mWoewoFibYtv5tCNtgLaoP8wLLEoGYrh6tLUP2y3zbAUdpt3umpBHzjB91qRz5rIvxfB3WS7L2sKZo9hNxXeQ79rSRMehswvxAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9Ig5B5A_R8j0AIRG5UGjQQHHARglgCbrD6F3FE04UgqQsGvMmcBvpXDFAARwZCiBoqkCB0PYPrQ2UBmHsC8JQckqBeGCgSAULhtABCsHiEIg2RBAgCF4UeCYTghERkoVcahnM9gzEYUIthHCCBcJeItfGVVIjUlIWIXh1BnChHIAiOATCrgRnQFcSwljlqsEoFwBxqAzwCCEAILR3UQlhN8ewfxgSzDgzMLAKYmJKAeHiFRDRXiJo6PWqifRDCPruPYCY-AZjuExKITYoijAkT2McnDe0DMiIEFygfPEPkIzqOGNk92IRUCJBiTTCwqT0lQEyT08a3SnAqXkCpMwDNha6R8qQ8adSIwMKuIQ4hdihnrAZl0dhZSJlOHGgwtWo5JmR1GRky5pzI44iViMHA-8CDTV4Q_AQ5gMFOTsRXGs_hMETV8WLZ0YwqlEFsWQz2XQ4CiNYDAPmMB1BbAIHs12NZDmmJOQ-c5lCljnMKdbG-2ccATDoBGQFKDYVo2GTXCc8B4UwAjLC_8cLzAXSujdZorLNDMiej5doJN3rUC-r9Xl7LUZXFhR-I-FsMV0w-NEaaEZuhWLpTXLoKLJSqtlQqmsQdeF0yDgXKOAApZwOoAByOA9EzggGARIGzDEcnziuDVNZ-FGwMQQNW7gBEFwsJIyeM4ZEZHkV3c5wbpG4IjYGvYwTQlCiuISxNYT42OOca4-4PqcCZpcfAOABclDrD1XMhpWAxIIyRlMJZKl_6AKMj8oyFkIFQKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoDpJ2OO4ipFaBzrFGAOdZ4wD71snRN09kXzzKcnBNxVh-QZDsb5WK_R5G0AZVENABQrhKJUeNEKe6g0XqyMcec8F72hGURkJ9L6-xvqveQDwHiIxoJwK4AKOakSx0qTKKFftcjhkgM6dAYhFoBwNgkca2GoAAf7Gwd9KIoMEG_b-o4Pln2OVfURq9MQjwCHvORx9VGAPDTRJKIUEYQMePg9UmAqyA7IQRmgbIYgliYDgkVdgD6MiLQ9RMWwIcb1N1nD5KT8EjX4mU5p5IGnP2JG00puAtrSL2gM9J4zBIyXHqYzkSzWmVwmY-B4caIHeGJOrCiNe40-keseScZ55ByQCEsMe_YEYXMMYyPePVdNot2fvP-5zNmuiqYKONFzenPMEbCERPz6K6aBdGB8UL4WjyRcS4xuL1nlPpbtmp9g5ofJaiyDgeqIxUbmh06Zkjwpcs0YZfSI8fmINQZSDBgZcGrgQqhctYTKGxMOfIbTFz_Wpitfa51wG2mSvBfKxF8IUWbMxfs_FmsDqJouZAwpsWnzzBgusZCmp0LYVMtpbvarsWHN5lUKVlpFWYCRapeQYFn39UWCuyd5Tt2z30t6658DaDKXQeTtHOOF2a6PGGz-7ogAr5UAGeRgBF5UAFnagA300ABZqgAAfUANOagBC6PJ4AGH_ACFNoASHNAAr8YAPbVADLfoAHPM5UWHe1ABF_yEftCtcOYXCLYnxAZHmTY5ho2htjb2Ww61RyknJAViiCanEFsPZdagUShScFQCicUIkQh2CRPG3WWPzaf11koRHDXb0zgdxYQ178VwPeQ6JtDg2wYVrEmgWR-Dug6kMUU09dKvWCKuCIsRSpX6SHYIAejNABkKoAXCVaeADRlQA5kaABkI9YyuUhhrkQoljGQU848AHbxgAj6MACFugAX1MAClpgBr60AEueTJUD6-zVo7JPi0ZxPQLXtPgAEI0APlKXPADAMb3k34SPGRKTQIGJo_x_sEAIyagBSWLnwkxyil5iyeEDMMbaCJtTcSHBkfASx8LOtlMeqa972n8K7S8t_oaDXW6P2ATYpS4vlT1OlxtoMrhYM440Y5tXskMRMYBUNxMVIGY_8XsYAACy4rgUDqR0CgC6k1kkEUE-k8Nrd-kjMQ91Iw8MgI8SlRwy4AA1OXQTMheHdgVuBKFIRPYQZPdYDIMJIRRfXhXOVwIRSwXhbmBELuZ_GYD5ZCTAhDIiHA1AITf3eA5bepasM7K4D1HzdeE_NebTWFPHV_fQlcOKCiYw6Q9YT_LzRpKYatMOKUN6MmDSTSAg8gRgMUekZGNZAZBsbKIKCaUAybcA6bSAqxaAwTTwhwiTdYTAO4K4PtOgTAQdEdFyHyWOM2Ilc3K4KPRhDw0OZGZaHyVOGKDkFhWgr5BgqABkfIrwggVbK2c3KYKOEjRdDXAgJOIWIiEiLIfIwA1AKomoqIwohsD1Ngu9Q0eIIiAucQ-cCwgufmOQ__CoriZzOzLQsWHQ-Y-7UOI8JY1AxQ-NMwoibY2mEtasb3asBmM7B2BQ-A0hOzWo6I2ApbNDBsOAhA9AC7BmKgZCTbDSZdCMEKb4x_M3ccLotA-AqLNEGAEEpo6EBFAQaCfLXMCEwExGKAIiPVChIiNdDdAgT2IrGsX4mgD4PoMMKYAAah8h6m01vV9V6FCRdB8hNhgAMJWPB3VTFhJIZPJJdGpN6m00_y90kxgDuGxKuNBP5luJgEnQSBnW2E9iCKvxm2e1sWGKmEWwD3Ewhzphx0ADsPQAXflABYOUACx5bnQAaojAA15UAAjbJvfnFcA5ZCRwP49zNoUkxkik7TFpCMOwKxSadgCDItVg9mdg42GEhaB3P3MAVAZHSDaDElGsMlRXTxH2Lk_VaHfmF0zMAVQsP4skpkmgO7SHTgZoZ1RhPNPvLNQtYshHLI0zfNbNVM0iT3W-OVH0v0j2KCIMyTZmVmUMiYjEgrIOVsr3XeP3IQ7TL3RMiwJVN5PAVVVfXU82TM5090zbZ6Hkgsik2syuaHesysxfXcmuA843VfRc6JKctsksjstGAMns6EVffstuDgyYzE7oEcq8sc_VP3XgoUK8y4kUj9cU9jUEnQmUuU6dCURU_zFcGARE5EiidAbc5k8YGE7TLcz0_kmk7THHQAUDtAATNMZ0pxXGhzOxQqLJYISzswot9R0N2x91plvP9O7LQWDL_LLFkxgDGEX0fB0PmBEg5GfLDLfOHI5Auxdzg1AvhOOLVQ0kgoVMJOXIsHgoyEQqImQqwpzLQoZAwvXNovYAFNpJXBx0ACCzQAHQViLSKyzyKtK0UqKaxbK-TSTZKGKziVxmKuzAy2KlgOL71uL2BeL2hZLBLhLBypiPzxLPMlgpKhsDldi5KKIFLoLKU3DAiL8EzZt5DIiCjNSVDPiiiGiawcdAAjA0AFhNKy2maHAAQlUqRJRM0ucvso9QsBx0ADTMwAQmti9cdRtmdAAUvUAGmvQAZ2Vi8mdAB4tMADgVOnRnMWVwEYO2KYfmOMy_B3J3Us67Giuy48zFDkpyws31Qwo8OM1HSbdHODVa33Dkj45baKjHCUxolySgyvKAVwoFCE5KnYMXa3IFZahM5S4kqUtc10nyTCpqq85JBlMjGguol47U-_DFGqg8-PdHaq-k2i7aumEuNZea8cJaiDE6iOAOc6gCsWaHUG_a7yZ6LM9cjG4qtPfHXPPPCnSnJnY06a8nL7Tapq3DAKoHAQJ4wor6t2GJJ6iNV6pyX6ybISuVA8svCvCNEguTAQO3dgUc1PdgQAIM0-dAA-6MADt_QAMLk-F_V4gmdABMJUAA28wAEui2aGcOaMyyy0a7L2BOUkbjaoBaa9S085qFqJxkJjrL8zrMcvzLtuEDKfIhy2Td40J5wCsWrxYcd2a5UsafJvbxw9qKSQ4RtmV8aA7I5iao6xY1qhcOSS4hTTVZbREQ1y9VcoACVo9rY_UDZ4g-ZkI3Vqx7rCx4Sug2CIKp1FKVxJa4Ayi1SakNTYbVC3j_rWq09AAmNMACNrQAKDkOrAAHU0ADtjbnbk_Sp2oyq8_c-u83HAOWmuj29aiMaq12pu92hy3WHHLWtnPsSugoJnPCwAMBcl6m9Kqa56K1ai6dr-izdZExa3DB7Wzf6cdAAXt0AFLjQABfiS8MU_c8aUdc6iag735TV-Y66Kyj7AH4g26LAO6fj3AJDe75SUrYLaZyaKTDKcKTK08JghAxh3BHywkPLRxfS7zWLbVfLV9_KeLzz2hZjYBQqQyXyrgI7IzbrYqv8LAKI8TUUvrB6Qjr8wiiq6Y96sHH6VccGr646oca7xbyA3LndoR3zT7z797TN48T6IHIHAAeBTgeLj9pzrRzztQYxS83vg5PIezkoewsFN3m_oArLpXCjgvoDR9SKUPs0eru0Zbq4gAfDXiAMbwdVoAz9zGIHMSjyXa3GJnALj8uydoHTifJXCEN0QXT_CEJmKId5l91kIiYbuRpdosaiakS0cSagB-h6u6GlXnFDILk0OvryTXnjUOsRTFlkuLTNmsL_iUBACam2FcDSDZWoEAl0BAgMDAjpX4FQG9EZCQHYH4B-GLGqAyHNB_DJH2bNn4ERPyGoH4CuH4BChwGeZChqnWH4HKHIH6H3oecOZAE0nWjwlgGhCwG9EueArZkSFzDyEy1NElHNGOb-FLHeerH4FUz-f4FbTZVRYsE-bFKSPhAgHgD-Y9X4HhdEAOf4AAD1N4cAAAOHANKXFmsfgCSTFkAalpMHAAAJmeZ6hZbxcEE1EtEiA5dpbSgZaZf4CsISQbWRdwF0EgBSBWdQDWZgS7UJhAFoB9CyAeaOdNFoHNApfNFmBmH4HkAUA_iAA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=I({url:"https://randomuser.me/api",manual:!0}),n=e.data,A=e.loading,t=(e.cancel,e.run),r=Object(s.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(c.b)(u.a.Fragment,null,Object(c.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(c.b)(a.a,{onClick:t,style:{marginTop:16},mdxType:"Button"},"fetch"))},{mdxType:"Demo"})}),Object(c.b)("h3",{id:"\u8f6e\u8be2"},"\u8f6e\u8be2"),Object(c.b)(l.c,{__position:2,__code:"() => {\n  function Demo() {\n    const { data, loading, timer } = useAPI({\n      url: `https://randomuser.me/api`,\n      pollingInterval: 3000,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={timer.pause}>pause</Button>\n          <Button onClick={timer.stop}>stop</Button>\n          <Button onClick={timer.resume}>resume</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:l.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:I},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWGIjyONCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGKRZFwUEgKBo9AEVh4iuJMQrNzWtYW4X6eoFzqNcaBxooqiaKjWmtbx5aI299BmfYAAff3WPkDlQ3gUJkbsQP2AAbQAXQ5GOQrjgOg-AEOcHt6ALct2PfdIuOc5Ft9c66Ag-nMN3c4TA7q9rHi-MatBVJnLa2Y5md9qz8XWO7-QpAb1Ba-rxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQ_brct0eOOZah7CgWJti27mMhwOKKP26-iKkMfOOHuv9_H8wj5PnZz_5S-UTX_a_4zAfgfIeu8tav04nsVAx9T7fx5mHekR59pdEQTAYBb9n570kI_Ce082hYxfpuXeJcRbgy1mXCutYKY0XYEQ2m8gyG1kkJjaGZgvwgDgIZYyRFTLmXDLgAgWgKDAX0AwNS9oTJwESE5OyOAPSSOkeQP0fIDaI3Kg0aCA44CMEsATdYfQe4omnCkFSFg15kzgN9K4YoACODIUT6xeKY9gURUChHiFY9gXhKDklQM4nWJ8Zz61oIbDxVw3FEECAIZxR4JhOE8RGAxVwjGcz2DMCxnjbH2III4ggi18ZVUiNSHRYhnHUGcKEcgCI4CWKuBGdAVxLD5OWqwSgXAymoDPAIIQAgEndS6T05p7BWntLMODMwsApiYkoB4eIVE4kNImkkuexiljmI-rU9gWT4A5NUnktGmiin3yRKUxycN7QMyIgQXKo5prjQjLE4YizPYhFQIkIZNMLDTNmVAeZTzxqPKcCpeQKkzAMwFrpHyOjxonIjOYq4GitElI-esBmXQ7E7L-U4ca5jlajn-dHb5cz8XYujjieWIwcBgFuXgZxFCBDmAUU5EpVcaz-EURNZpwtnRjEOUQYpujvYoJ8awGASwujqC2PsgpnzLbouyVih8uKDFrPSTgdZtsSG5xwBMOgEZ2UyJQWjWVddhVQFFRGFB_44DMguldG6zQrWaGZE9Hy7QSbvWoF9X6TqbWoFRlcFBH4wFW3diLD40RpoRm6DKkNFgJVSujcGsNdMQ7ONTRyIuMcABSzgdQADkcApJnBAMAiQ4XpI5IXFcJqayuPcT3XF9b4hFwsAEvWBsjaNrVe2oJnaW3C2oAMoUVxcVDu6UKVtUCKlVPgPcNJBB1WoBndUuARclDrGTSCs5WAxIIyRlMCFKl2GcKMkyoyFkBFCKAnoUC4ExJQQpvMcMTlEgABlbAEHIkRew8QoCzJ2N-4ipFaBAbFGAIDZ4wDUtsnRN09kXygqcnBGpVgf4CBKb5WK_Qja0AnFnFuKRwmhEiRkcaIUkNtpw1kY4854LEdI0cHyFHHJUbYDR8gHg6kRjkTgVwAV51InjkMvlAqA65HDJAZ06AxCLSDm4hI40FNQEo32ajeGUT8YIAxqJ5HVP9nY3hi-Ah7w6bI8x1Tw00SSiFBGTjdSRMyjE0HZCCM0DZDEEsTAcEirsAiVExataJi2DDlENABRxrefgum_EIWovJB8vFmLwW4BFtIvaRLdHEjJYJDq9D95ItZZyyFzj41OPOPGdWQB9yUW03JScSl5ByQCEsD_fYEYUt5Z5veZNdNOvGYKxZlcnWuhhcI-NTrSX1jbv9LFMIREavGpXPV0YHxmutaPO1_r-X0C9ZrCNgjEXzQ-S1FkHA9URio3NLF1LmnhQVdUygkjMaJq8f4ykQTbzhNXFE_fXR4nXMwCk7mWNtNOt3amCds7F3AYxZW419bbXwgddywN3bMXS0TU65xwLwt6XmB5YU_lf2GxmtFUtlNN2usZEG3mVQq2rkbZgO1g15BOUU7rpjlHJWPC48p313LnGeNyP1QJ1OscE57bro8fDqD2CACvlQAZ5GAEXlQAWdqADfTQAFmqAAB9QA05qAELo9XgAYf8AIU2gBIc0ACvxgA9tUAMt-gAc8zjbLkVMBWV1wsO0fNw4yfdC7QyPMmxzC9pSMEjIXbOCElHKSckC2KLTsqau9gl1x09M4KgFE4oRIhDsEiKdWspeW0YVrJQVPRsO0I_niwaaVyF_w-XBlEm3PSYe2MndYk0AhLUd0HU6SNmYdlc2qAnjvG-KVLQyQ7BAD0ZoAMhVAC4SrrwAaMqAHMjQAMhHrCDyH0Jg-zPRLH-wQAdvGACPowAIW6ABfUwAKWmAGvrQAS55MmXfHudCTFlNLRiM9Ao-ZeAAQjQA-UpW8AMAxt_h1ek6l-kJ0BAhlX939x9ABGTUAFJYv_FvWbRSeYPzYQWeHyYXPjATK4ITBOF_NpN_MFW2KYeqNecJVAxbGVGbMwJA7ofsI5GAMUOvVATDdAt7LA15RIYTA5JzP7AHSTdzGTFSBmOg4nBg0cCuK4EQ6kRgiuRgE5GFKRGRF5ZTLPDgpDc5McVRCUboGQhlAANXiAZD73WHbgSiIy8WEBH3WAyB6U8UAOcXzlcE8UsGcTiCcnnDILXjpWQkkJ4LEKYOhRc34Ok1OWrGMyuFrUAU8JmBiyeyPGiJizvm6hIJiOm2BVb3hiBwPUNDejJg0k0kUPIEYDFHpGRhhTeQbGyiClezkXe0-04NwIKV-zQRKIjgIE83WEwDuCuCfToEwFfQ_Rch8njgtg1TTyuG7wsWKPDmRmWh8nThig5GsXEP0MMJaJmPaKwxtjTymBjk01A3WlHBTn5iIhIiyGmKYIMKgCMNaNmIbFrVMIKCuERigCIiLjcIRB7hSKLjRGqKkKIl0K4mG3QwiOFiiJQLXinTiO6n-P8IrinSSOiPXQtir2rAZmMydgBKBx0XQ2mNKM2KCMbw80SWCOyD2wZioGQkhw0nAwjBCnJKINT3HBOLELAA6zRBgAZJ2OhFFQEGgnmxBxpKBwjBeKImTX0SIigxgwIG9lqzpkpJoA-D6DDCmAAGofIeoMc9klTukXQfJUQGRYiVjK45SRYFTF1ehdTMx1TeoYsZtK8vMYA7hxS0TGTfjMSYBf0EgANthvY2CPtsCvsE4fs_C8S2i-CiSZMOcawZdAA7D0AF35QAWDlAAseWt0AGqIwANeVAAI2yP3txXDRWQkcCpLKzaEVMtJVJiyuQjDsAKUmnYF4zXXYEeMSnGA5IWnz3x0NH9X9LgC1RrB1QD3qT9lB1zi51-KLMzFdULCpJ1JVL5052aArQsSXRXTnXnLdzGNS3KXvxqSHNIgr1IRDSrJrK9iggbK82ZlZnZjMOePiAWxDgPMr13k7McJi0rz7IsAjQICjRsKFGjK1jHMLNLMh2enNNnP0HXNHMXM3KXUAMgurhguT1s1_LALfMPP50OJlJPImjPLkUbJQqvI7nMNFO6AfLQqfMp07JQrQtRIdNo2dMs0ZOqxZK9P_QlF9JeVrRgF5P5IonQHAsnNbMNPzOAoErVI1Jixl0AFA7QAEzTDdNcVwudjMxL4KLBlLyzjxAFYdq8Vxjy0Y6zzzoRQDwkYAxhADHxAF5gRJM0mzrynjDQ7zSKOQ9ti9hNGLuSkiPTWKfTZT_yeSMheKiJ-KNLBKDSYAYswKQrxLbSVwZdAAgs0AB0FeSxSxc9S5UiCrYkWNKq0xdJI7S-hXS0cas_S3CotJYFCkysy0Ax8JI6ywim8hy14pylypYNy1jQsbk6Eryv9Hy1nGozAj7JYonYpW4qYQkoHAQuYvRWmGXQAIwNABYTWStpi5wAEJuKAqBTgr0qaBVLd9AA0zMAEJrFfWXZ7dgY3QAFL1ABpr0AGdlFfI3QAeLTAA4FT10N2FlcBGAdimF-IwLqPzxryUvQxUsyrpk7OypVIQWewwNFw-3F2Ez-pXE7MB2BwIOrFcoTncpcnb1D3iAKI5RYp6vYtdyzw5R-oE1NPlLdKAuLJ8kiu2oIDQsmVr2WPxIjImqb2FlWpgoH3FxWvCwtLpt2vjVHBhQ-vHG-t42hqjiDjhpoo5sXNppyu8menHOAsFt33lzn3nw101yN0TJevV13jBr1L81MrQx5jDNmKJo9iGSxs31xqclJsGtzxrBgvX37SgFUP8wyGdsfN30ACDNO3QAPujAA7f0ADC5FxdwBtI3QATCVAANvMABLovWg3A2ynLnPmsSxPJPHvW2ZWSO-INWiwGXd6z6icZCKGuo2GyXcimsdOqK8aEi6utCecBbWtLWGXfWkNMuEWkuo2xU6E8usXaOGW3eGvCi8hY02vO0rNV2nxQJYPd21VZcgfcVZCatasF07YlyLoUw7q70wmlcR23skM-gi2sahvNmjzPywu8fQAJjTAAja0ACg5A6wAB1NAA7Y2t2FgVpVPYBtM1Llomhnt1j7RCS7TVs5uzrT1zrcXzuBsthlwDrNz7FnoKCNyksADAXJ-o_JauuLS320emsTs22rte28gQ-g8_BmXQAF7dABS40AAX41fMNTs8WkXCuoequ6vLNX4xejZK-ZB4B7GqANeiwDejqlyD4-cXetinYXykcmsL-l0X-yS8fCYIQMYdwIynpQqrCkq-svC8q4yk2qqnpR8cR2AOq2yoi28pq9sirVq9G9qiiKUxNA-nswMho8mmu6CiB1LN2kBmB1umu92kh_KovaEax8BpevOqANWqh6hwAHgUGHS4y6JbWHpb2Gw1Ktx6mD2dZGtZ5HrSJLd5cGaKp6VwY4uaonuGc7fGBGV6uJU8_GoASGhH2ARHOyHi7KWz9i_xmyUgi4Kq54zsCKVxHDkkQM_xHD3j3BPififCF0eHua7VAG56N8w8fVw4jx2BA15xryi5wjYGLBAEoSNmxVhYkjkS0iED2EmpthXA0hrVqBAJdAQIDAwJZV-BUBvRGQkB2B-AfhixqgMhzQfwyRvmLZ-BeT8hqB-Arh-AQocB4WQoap1h-ByhyB-gIGYXfmQBNJ1o8JYBoQsBvRQX6K2ZEhcw8gItTRJRzR_m_hSxkXqx-AxssX-BL1rVGWLBUWnS-j4QIB4AsXa1-BqXRAfn-AAA9TeHAAADhwDSk5ZrH4AklZZAHFaTBwAACZ4WeoFWuXBBNRLRIgVXJW0oZW5X-BpsxkT16XcBdBIAUgHnUAnmRE71CYQBaAfQsgYW_nTRaBzQRXzRZgZh-B5AFAGEgA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=I({url:"https://randomuser.me/api",pollingInterval:3e3}),n=e.data,A=e.loading,t=e.timer,r=Object(s.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(c.b)(u.a.Fragment,null,Object(c.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(c.b)(a.a.Group,{style:{marginTop:16}},Object(c.b)(a.a,{onClick:t.pause,mdxType:"Button"},"pause"),Object(c.b)(a.a,{onClick:t.stop,mdxType:"Button"},"stop"),Object(c.b)(a.a,{onClick:t.resume,mdxType:"Button"},"resume")))},{mdxType:"Demo"})}),Object(c.b)("h2",{id:"api"},"API"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{}),"\nconst { // \u8fd4\u56de\u6570\u636e\u540c useAsync\n  loading: boolean;\n  error?: Error;\n  data?: T;\n  cancel: () => void;\n  run: () => Promise<T>;\n  timer: {\n    stop: () => void;\n    resume: () => void;\n    pause: () => void;\n  };\n} = useAPI(params)\n\nparams: {\n  url: string;\n  options?: RequestInit;\n  manual?: boolean;\n  pollingInterval?: number;\n  onSuccess?: (d: T) => void;\n  onError?: (e: Error) => void;\n  fetch?: (url: string, options?: RequestInit) => Promise<T>;\n}\n")))}O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useAPI/index.mdx"}}),O.isMDXComponent=!0},"./src/useAsync/index.ts":function(e,n,A){"use strict";A.d(n,"a",function(){return p});var t=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/defineProperty.js"),r=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),o=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js"),a=A.n(o),i=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/toConsumableArray.js"),s=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),u=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/classCallCheck.js"),c=A("react");function l(e,n){var A=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),A.push.apply(A,t)}return A}function g(e){for(var n=1;n<arguments.length;n++){var A=null!=arguments[n]?arguments[n]:{};n%2?l(A,!0).forEach(function(n){Object(t.a)(e,n,A[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(A)):l(A).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(A,n))})}return e}var m=function e(n,A){var t=this;Object(u.a)(this,e),this.remaining=0,this.delay=0,this.cb=null,this.start=0,this.timerId=0,this.stop=function(){window.clearTimeout(t.timerId),t.timerId=0,t.remaining=t.delay},this.pause=function(){window.clearTimeout(t.timerId),t.remaining-=Date.now()-t.start},this.resume=function(){for(var e=arguments.length,n=new Array(e),A=0;A<e;A++)n[A]=arguments[A];if(t.start=Date.now(),window.clearTimeout(t.timerId),t.cb)return new Promise(function(e){t.timerId=window.setTimeout(Object(s.a)(a.a.mark(function A(){return a.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:t.cb&&(t.cb.apply(t,Object(i.a)(n||[])),e("No resolve value when pollingInterval is set, please use onSuccess & onError instead"));case 1:case"end":return A.stop()}},A)})),t.remaining)})},this.remaining=A,this.delay=A,this.start=A,this.timerId=A,this.cb=n};"undefined"!==typeof Options&&Options&&Options===Object(Options)&&Object.isExtensible(Options)&&Object.defineProperty(Options,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Options",filename:"src/useAsync/index.ts"}});var d=function(){},B=function(){var e=Object(s.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(c.useState)({loading:!1,cancel:d,run:B,timer:{stop:d,resume:B,pause:d}}),o=Object(r.a)(t,2),u=o[0],l=o[1],p=Object(c.useRef)(void 0),b=Object(c.useRef)(0),I=Object(c.useRef)(!0),j=Object(c.useRef)(!1);Object(c.useEffect)(function(){return b.current+=1,I.current=!0,function(){b.current+=1}},n);var E=Object(c.useCallback)(function(){var n=b.current;return l(function(e){return g({},e,{loading:!0})}),e.apply(void 0,arguments).then(function(e){return n===b.current&&(A.onSuccess&&A.onSuccess(e),l(function(n){return g({},n,{data:e,loading:!1})})),e}).catch(function(e){return n===b.current&&(A.onError&&A.onError(e),l(function(n){return g({},n,{error:e,loading:!1})})),e})},n),w=Object(c.useCallback)(function(){j.current=!0,b.current+=1,p.current&&p.current.stop(),l(function(e){return g({},e,{error:new Error("stopped"),loading:!1})})},[]),O=Object(c.useCallback)(function(){j.current=!0,b.current+=1,p.current&&p.current.pause(),l(function(e){return g({},e,{error:new Error("paused"),loading:!1})})},[]),Q=Object(c.useCallback)(Object(s.a)(a.a.mark(function e(){var n,A,t,r,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,A=new Array(n),t=0;t<n;t++)A[t]=o[t];if(j.current){e.next=4;break}return e.next=4,E.apply(void 0,A);case 4:if(!p.current){e.next=6;break}return e.abrupt("return",(r=p.current).resume.apply(r,Object(i.a)(A||[])));case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}},e)})),[]),C=Object(c.useCallback)(Object(s.a)(a.a.mark(function e(){var n,t,r,o,s,u,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,t=new Array(n),r=0;r<n;r++)t[r]=c[r];if(o=b.current,A.manual&&I.current){e.next=6;break}return e.next=5,E.apply(void 0,Object(i.a)(t||[]));case 5:s=e.sent;case 6:if(b.current!==o){e.next=15;break}if(p.current=new m(function(){return C.apply(void 0,t)},A.pollingInterval),!I.current||!A.manual){e.next=12;break}I.current=!1,e.next=15;break;case 12:return e.next=14,(u=p.current).resume.apply(u,Object(i.a)(t||[]));case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}},e)})),[A.pollingInterval,A.manual,E]),M=Object(c.useCallback)(function(){b.current+=1;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return A.pollingInterval?(A.manual||w(),C.apply(void 0,n)):E.apply(void 0,Object(i.a)(n||[]))},[E,A.pollingInterval]),h=Object(c.useCallback)(function(){b.current+=1,l(function(e){return g({},e,{error:new Error("canceled"),loading:!1})})},[]);return Object(c.useEffect)(function(){if(A.pollingInterval)C();else if(!A.manual){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];E.apply(void 0,Object(i.a)(n||[]))}return function(){b.current+=1,w()}},[A.manual,A.pollingInterval,E,C]),{loading:u.loading,error:u.error,data:u.data,cancel:h,run:A.manual&&A.pollingInterval?Q:M,timer:{stop:w,resume:Q,pause:O}}}"undefined"!==typeof ReturnValue&&ReturnValue&&ReturnValue===Object(ReturnValue)&&Object.isExtensible(ReturnValue)&&Object.defineProperty(ReturnValue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReturnValue",filename:"src/useAsync/index.ts"}}),p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsync",filename:"src/useAsync/index.ts"}})}}]);