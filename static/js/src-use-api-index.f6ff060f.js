(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/useAPI/index.mdx":function(e,n,A){"use strict";A.r(n);var t,r=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/slicedToArray.js"),o=(A("./node_modules/_antd@3.23.4@antd/es/spin/style/index.js"),A("./node_modules/_antd@3.23.4@antd/es/spin/index.js")),a=(A("./node_modules/_antd@3.23.4@antd/es/button/style/index.js"),A("./node_modules/_antd@3.23.4@antd/es/button/index.js")),i=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=A("react"),c=A.n(s),u=A("./node_modules/_@mdx-js_react@1.5.0@@mdx-js/react/dist/index.es.js"),g=A("./node_modules/_docz@1.2.0@docz/dist/index.esm.js"),l=(A("./node_modules/_antd@3.23.4@antd/es/select/style/index.js"),A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/regenerator/index.js")),m=A.n(l),d=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/asyncToGenerator.js"),B=A("./src/useAsync/index.ts"),p=function(e){t=e};p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"configRequest",filename:"src/useAPI/index.ts"}});var I=function(e){var n=e.method||t||fetch;return Object(B.a)(Object(d.a)(m.a.mark((function A(){return m.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",new Promise((function(A,t){n(e.url,e.options).then(function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(n.json&&"function"===typeof n.json?n.json():n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){t(e)}))})));case 1:case"end":return A.stop()}}),A)}))),[JSON.stringify(e)],{manual:e.manual,pollingInterval:e.pollingInterval,onError:e.onError,onSuccess:e.onSuccess})},C=I;I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAPI",filename:"src/useAPI/index.ts"}}),A.d(n,"default",(function(){return E}));j="Demo";var j,O={},b="wrapper";function E(e){var n=e.components,A=Object(i.a)(e,["components"]);return Object(u.b)(b,Object.assign({},O,A,{components:n,mdxType:"MDXLayout"}),Object(u.b)("h1",{id:"useapi"},"useAPI"),Object(u.b)("p",null,"\u4e00\u4e2a\u5185\u7f6e ",Object(u.b)("inlineCode",{parentName:"p"},"umi-request"),"\uff0c\u5e2e\u4f60\u7ba1\u7406\u7f51\u7edc\u8bf7\u6c42\u7684 Hook\uff0c\u652f\u6301\u7acb\u5373\u6267\u884c\uff0c\u624b\u52a8\u89e6\u53d1\u6267\u884c\uff0c\u8f6e\u8be2\u3002"),Object(u.b)("h2",{id:"\u4ee3\u7801\u6f14\u793a"},"\u4ee3\u7801\u6f14\u793a"),Object(u.b)("h3",{id:"\u7acb\u5373\u6267\u884c"},"\u7acb\u5373\u6267\u884c"),Object(u.b)(g.c,{__position:0,__code:"() => {\n  function Demo() {\n    const [state, set] = useState(0)\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api?id=${state}`,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>\n          <div>id: {state}</div> <div>email: {email}</div>\n        </Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={run}>reload</Button>\n          <Button onClick={cancel}>cancel</Button>\n          <Button onClick={() => set(c => c + 1)}>increase id</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:g.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhvYABtFEyPW0cAF1xookisgjEK3zpumGag9BolcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJwW-igK5ikIW57keTIMEiCiBBwI9JFmCBvq4bgABJgBZ2h5GKGLBZreQBY9wtUBc6jXGgLmiKomio1pj28eWiMY9F0j2AAHwT1ivdDeBQmRuwk6Z9mOUZkLOez4BU4D6B3Z9ixGbj1x2fLj3vY9roCD6cxw4rhMDvb2seL4xq0FUmctsl6WZ32zWK5jWQuCuJ3SJdyHY1rKHS511iV_kBfZHHwWpB71BO_bxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQseI8P4_OL2VB7CgLEbYW0lb7S6MPdAUgf7UAPl3I-HFmTUAAUAracsERQH2mg-cUCEH723h7eBJ9zBIMATsLaUc2YEAjOQNGNCADUvUOT7TQOQU0RFOCQMkNAvBX8CFcNwefS-sCd6bm3g3T2msm4t1rBTGi7BRG03kODbcmNoZmC_CAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9FYmx5A_R8j0AIRG5UGjQQHHARglgCbrG1lcFE04UgqQsM_MmcBvpXDFAARwZCiBoqkCDhPYFEVAoR4gxPYF4Sg5JUBpMFAkAoyTaACFYNkq4mSiCBAEGko8EwnA5IjEE6-oSliRI-tE2JMAEnwAIMkl4i18ZVUiNSPxYg0nUGcKEcgCI4A9ImugK4lgRnLVYJQLg0zUBngEEIAQLTup7IOes9gmztlmHBmYWAUxMSUA8PEKiTSVkTTaSEmWewZhRJyfExJgyUlnO8eMoijAkRTMcnDe0DNdCQBSH8gZ40IyNOGK8ihSIzk0wsPcx5UBnmovGiipwKl5AqTMAzNWukfJ-PGuCiMkSrheJ8ZMzF6wGZdH6SifFThxqRItqOAl2ccVPIFTy7OYBRzTTSVIgQ5hHFOUmW3Gs_gnETXWZrZ0YxgVEAmf4mOXQ4D5NYDARWMB1BbAIKy3hE4-n_O5Q-Pl2tOnfJwF06gcBxEexwBMOgEYVW2INWjLFXcbWGqgMaiMBr_yGvMBdK6N1mhRs0MyJ6Pl2gk3etQL6v0k0xtRlcA1H58ELWLR8aI00IzdFGcGruXRzWSkrUW61FgvZpLpl7OuTMABSzgdQADkcAfJnBAMAiR6XfI5LXFcNaawZKyavPlc74idosMUwBM4ykZEqQul1a7SluO3Suv-JyhRXD5dQE9Agj0zLmQs-4XyCCutQLM-Z8A4CdqUOsJtpLIVYDEgjJGUxKUqQ0Vooy8qjIWUMcYoCehQLgTElBCm8xwxOUSAAGVsAQciRF7DxCgI8nYOHiJzxNRpMUYBiNnjABK2ydE3T2RfGSpycFFlWH5BkSZvlYr9EqbQG1UQ0AFHGiFZjq7eNZGOPOeCImxN9gk_x8gHgrgx3sTgVwAV71IkZrnNG2rdWJ1yOGSAzp0BiEWsnTJCRxpWagHJ_sbBJMs3tD5UTjlxOOf4zEI8Ah7xXCRLJ9zvsQlzIiAIahym1V6ZlAZ5OyEEZoGyGIJYmA4JFXYDUupi0Z0TFsGnQTA9Zw-VS_BNt-I8sleSMV6TiQyu5bgIO0iLmpNpbqwSb1HHfM5Gq61lc9WPgeHGkptJ1zqwomfkiq1QtyQCEsBx_YEZ-veYyPeJtdMludfvIF2m_WugFeEz5frlWRv2bCOwnyFCZ3kBm3No8C2Ns-dW21vLe3A6FfYOaHyWosg4HqiMVG5pysNec6k9YP7_TVgNaEI8SK1MaZSFp1AiQdMciuPp0F_jDPxZgCZ3M1a-vtZB-Nb7tBfujEBmV674pZvzfCIt9ry2utrZrCOia_WlPZckaOaRmqxk6oxw2A1Rqq0BOtQ9lb3XKG3ZgAt_1NDLvFtZ_TvLHPuMhqBwNiMam_WacTsnFHzOu6PFDdD7ogAr5UAGeRgBF5UAFnagA300ABZqgAAfUANOagBC6Lt4AGH_ACFNoASHNAAr8YAPbVADLfoAHPNi0WCF-GmASr1ftD7cOKPxrznxAZHmTY5g90boPb2WwlDSTknYRRP-L673sEuhe_ZQpOB-1oB2L6_gQhI6PfXMrHtlE-yUBr17QmZyG89v3jvkfueyqMwl0zJ2rm_rEmgcpHjug6m-d0rjwal1QByXkgpSp5GSHYIAejNABkKoAXCUXeADRlQA5kaABkI9YWeUiboqVUjL0O6nb-N4AO3jABH0YAELdAAvqYAFLTABr60ACXPJkZ9W9N9FpV5NZNGC5dAV_XfQABCNAB8pUD0AGAY0Ay9I5K4S9M5WA-A9gQARk1ABSWLQKnwh0UnmAy2ECvguzh0038yRxRxgK2TgPJXdSmHqmfmqWoMmyDXBzMAoO6H7BBRgDFGbllS41oPsXh0R2R101GXRxgBpTi2M0SzMxUgZmEP51EJHyCnkxELEJbjBSR2Wh8jlyi1GVsxCDsCRGYyhTHDcXn3YEMNlQADVU8lDMdg0IECgrhN9xRCl1gMgDkclL00lq4clLA0ksFV5OCZhpVkIrgtDqQXDUBlCx8cc1CIVqxGcZ4VxxsX4qDn4ysocjxuDiiVw4oKJyj4iwcSVp94YcdANDQ3oyYNJNJrEFUxR6RkZaUTClUwA9CtdpD6Cm85CgUYtQVuiM4CBkt1hMA7grhkM6BMA0NMMXIfIdNy43U_YrhF8olGBpjkZTCU4YpUdnDdD3CoAGRDj05ji1dgsphmZSMlgiICBOZVYiIeZaBbjxDUAribijjZiGwZ0fDEpDR4giJO0YiajO0lYkjJidC_jO1ciHi6YCjYSud6Qyj9DtDUij0qiiJMTFFy5W02V2DxhOtg4dCwA_FOtbiejZisdVDTMGxsdcd0BmcYU2hMxPiaS-YuSKShMpg-SKNFs0QYBBTa9oRjUBBoIzs8dyMccIxEYoAiIm1AkiJqNaMqEFdaYqBkJH1eh9kXQ6EfIeoythSPg-gwwRTxgJSSjdCLDRcPYDSaBrSTTMwzTeoytwcW0UsYA7gNTqx2VkJqS8MEhCNthVMRiEcGDxi0dESGSZjmTx8ksg0VxjdAA7D0AF35QAWDlAAseSD0AGqIwANeVAAI2y_zDxXFDP_h5LtLdKNJtP0DKzeIjDsFGUmnYDU3fXYDBJSCuFRDTy9n7xlXMEGOGPU0009W7J9VQAjGrgzOtSVyVkcENO8mekbI9NtM52bU4GaHHSiSfVLzfV3PVx2IaxvVfUWQXLFn73b2LTbI7Ojigh7JSzFglilgSgHIhLVO6BHLbwkWtTHOODFkAq9k1jLQIArWCOr3x2XIPNXPrI3J8i3ONJ3LRJ9iVwvKfRwMworhwsrwOUrSrwEHvMFiHx9ifLRi7LfOhFIs_JHh_NVPYQAu3korphAtgvqU1jJOrC7wWI9TkwZgKPDPwyjJjimxrBgFlPlIonQG3JdEOwdJrPrMUq9PNLK2N0AFA7QAEzSPcHcVwldGd1LLV8LKSfNTLGtn4KcVxKLqLOzXz7FezuLqkYAxhL1HwCj5gRIORGLvyrgWL_yORmcu8UdhKKTCSq0NIIyCMJRoy9S6YZKMg5KiIFL0KlL7SGRKc1KMqNKfTMzd9AAgs0AB0FAyoyg8kyvKsymdCwKq5s90qK2yxRfI0cdsmipywdJYVyjLdy9gTy9oKK3y_y3w381ikKkbJYcKoLdldOGHPk2KiS8wycmQ84xQ5M3olQtMszJcumY3QAIwNABYTXKtpiVwAEJkq5SFT0qGqarNZjdAA0zMAEJrK_E3GHL3QAFL1ABpr0AGdlK_T3QAeLTAA4FVdw901lcBGEDimCVhWunN9IqrZ061MrPMFhAvqs9MfVKJj21xkL1xzgmrspXBAvZLUMmvxoiulNny3XiA6NVQWvEvitj2sNVVhoRykqFgpKQvXNQtytusAtuRtQIF6UZNTMyIn01nOpwrXzxrOqtOqpRsblHFpUhvHBhpxt12zgN3AoloPLQtupQonGQjXJoAVsFmNzNxP1P3twd09zzNBrt23nRttJsz6ulwEA2tmKZsjjOSpofygFpqclZo9RbxrBwtv3v23WsKf1qQyBDvIosGN0ACDNUPQAPujAA7f0ADC5dJdwedT3QATCVAANvMABLou293B2hCiaOW_WuNKWnO-IU2j2Y3CGqGw2-c9WhHPGrWxXFJUy8aIKwCltaEP88yva3fe24tJuZWlup248LGycnXDuzW3OeO1CXirnP4wW30ztRmMO_JddO_HPKAZ1I8tfRWZCKdasYM-mTm-cL8sSyMxmlcIOtapMoE0Wjk0wl0s23fQAJjTAAja0ACg5J6wAB1NAA7YyD01j1oxvYG9ItJ1oml3pKWz3KW3QbpZwPLOtrsyXrpHprCTtD19z7D3oKE920sADAXIBr_E6ruAo5qiuDimsEC327dAO8gZ-7Wr-Y3QAF7dABS40AAX46_L-ECtW-xBerOfXZerelcRmJWY-7pHAcOw-i-iwK-x41YeWKAe-uKnYSS3amsKB522BrS3fCYIQMYdweig5VqqhZ8iaTqly0ityjy0ix8GI7IV8Ea8EoKhaUKqa3OOTCibUi1JmoO-Mpg-Cj2bCpfd1BR4h5B6mqANBiwZhmmzoth8itCecdhSW6Jv2C2OuxJ3B7hnhwAHgVBGK4RGcAxHO7JG16IdFaN7EqfYDHTTNLt5aGMmpHaYd7cmGtT6H15HFGUHl1W6lgUn_a0nlH2BVGQLQSvzRrnY_x-zO0erFmcBuLO1q5glSMcBq5oT3B0E4TEiBmYnpaa7enYmkGD7hnNGc05rugC1b6OwUTOs8iv4Cij0saCSFSP1ST6jUANEmpthXA0ho1qBAJdAQIDAwJg1-BUBvRGQkB2B-AfhixqgMhzQfwyREXy5-BZT8hqB-Arh-AQocBSWQoap1h-ByhWEIBcmiXkWQBNJ1o8JYBoQsBvRsWpMyRKBEhcw8hhNTRJRzRUW_hSxKXqx-ACsGX-AoNo0JWLBqXAyVj4QIB4AGWZ1-AhXRAkX-AAA9N-HAAADhwDSgVZrH4AkhlZAD1aTBwAACZSWepzXFXBBNRLRIhrWDW0pjXTX-AwcrlQMxXcBYUIAUgwWAXtBIWzEYX-BaAfQsgiWUXTRaBzRtXzRZgZh-B5AFAlEgA",mdxType:"Playground"},(function(){return Object(u.b)((function(){var e=Object(s.useState)(0),n=Object(r.a)(e,2),A=n[0],t=n[1],i=C({url:"https://randomuser.me/api?id=".concat(A)}),g=i.data,l=i.loading,m=i.cancel,d=i.run,B=Object(s.useMemo)((function(){return(((g||{}).results||[])[0]||{}).email}),[g]);return Object(u.b)(c.a.Fragment,null,Object(u.b)(o.a,{spinning:l,mdxType:"Spin"},Object(u.b)("div",null,"id: ",A)," ",Object(u.b)("div",null,"email: ",B)),Object(u.b)(a.a.Group,{style:{marginTop:16}},Object(u.b)(a.a,{onClick:d,mdxType:"Button"},"reload"),Object(u.b)(a.a,{onClick:m,mdxType:"Button"},"cancel"),Object(u.b)(a.a,{onClick:function(){return t((function(e){return e+1}))},mdxType:"Button"},"increase id")))}),{mdxType:"Demo"})})),Object(u.b)("h3",{id:"\u624b\u52a8\u89e6\u53d1\u6267\u884c"},"\u624b\u52a8\u89e6\u53d1\u6267\u884c"),Object(u.b)(g.c,{__position:1,__code:"() => {\n  function Demo() {\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api`,\n      manual: true,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button onClick={run} style={{ marginTop: 16 }}>\n          fetch\n        </Button>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:g.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGLxfFqJUFCeIrlRBkdd1haxfp6gXOo1xoHGiiqJoqNad1vHlojT30GZ9gAB9fdY-QOVDeBQmRux_fYABtABdDko5CmO_YD4Ag5wW3oDN83o-90iY6z8W32zroCD6cwXezhMDsr2seL4xq0FUmctrZjmZ32jOpdYzv5CkOvUGryvGHYm5mWoewoFibYtv5tCNtgLaoP8wLLEoGYrh6tLUP2y3zbAUdpt3umpBHzjB91qRz5rIvxfB3WS7L2sKZo9hNxXeQ79rSRMehswvxAOAhljJEVMuZcMuACBaAoMBfQDA1L2hMnARITk7I4A9Ig5B5A_R8j0AIRG5UGjQQHHARglgCbrD6F3FE04UgqQsGvMmcBvpXDFAARwZCiBoqkCB0PYPrQ2UBmHsC8JQckqBeGCgSAULhtABCsHiEIg2RBAgCF4UeCYTghERkoVcahnM9gzEYUIthHCCBcJeItfGVVIjUlIWIXh1BnChHIAiOATCrgRnQFcSwljlqsEoFwBxqAzwCCEAILR3UQlhN8ewfxgSzDgzMLAKYmJKAeHiFRDRXiJo6PWqifRDCPruPYCY-AZjuExKITYoijAkT2McnDe0DNdCQBSKUlyPkIzqOGNk92IRUCJBiTTCwqT0lQEyT08a3SnAqXkCpMwDNha6R8qQ8adSIwMKuIQ4hdihnrAZl0dhZSJlOHGgwtWo5JmR1GRky5pzI77wINNXhD8BDmAwU5OxFcaz-EwRNXxYtnRjCqUQWxZDPZdDgKI1gMA-YwHUFsAgezXY1kOaYk5D5zmUKWOcwp1sb7ZxwBMOgEZfkoMhWjYZNcJzwGhTACMkL_xQvMBdK6N1miMs0MyJ6Pl2gk3etQL6v1OXMtRlcSFH4j4WxRXTD40RpoRm6FYqlNcugIslIqyVMqaxB14XTIOBco4AClnA6gAHI4D0TOCAYBEgbMMRyfOK4VU1n4UbAxBA1buAEQXCwkjJ4zhkRkeRXdzn-ukbgkNvq9jBNCUKK4uLY1hOjY45xrj7gepwKmlx8A4AFyUOsLVcyGlYDEgjJGUwlkqX_oAoyHyjIWQgVAoCehQLgTElBCm8xwxOUSAAGVsAQciRF7DxCgOknYw7iKkVoFOsUYAp1njAPvWydE3T2RfPMpycE3FWH5BkOxvlYr9HkbQGlUQ0AFHGiFLdfqT1ZGOPOeC17b19nvWe8gHgPERjQTgVwAUM1IljpUmUYK_a5HDJAZ06AxCLQDgbBI40ENQFff2NgD6UT_qmD5G9jk73obPTEI8Ah7xXCRC-vDhZUDUOcREAQEZP0eJA9UmAqyA7IQRmgbIYgliYDgkVdgSiVGLRdRMWwIcL1N1nD5Pj8E9X4nE7J5IMmn2JHk2JuAlrSL2hU_x9TBIiX7pIzkXTcmVwaY-B4can7eGJOrCiNe40-kuvIOSAQlh937AjBZojGR7xarpj5oz94KO0ws10STV6fIWaU7Z1DYQiJOeRXTVz4p3OefCN5gzvnjMBZrOFjOUn2Dmh8lqLIOB6ojFRuaBTmnMPCji5RyFoQjxOd_f-lIgGBnAauCCsFy12OQa4yZ8hYWDP1ew-wMrtAKujEBvJ1L_6PNHi80F4j_n5M2omhZz9ImxavPMEC6xoKangshXSylu81t-ZM-tUcy2YBebJeQf5l3tUWC21l8Tu2j3Utq5Zn9aDSUAeTtHOOeWa6PBpfSVrgAr5UAGeRgBF5UAFnagA300ABZqgAAfUANOagBC6NR4AGH_ACFNoASHNAAr8YAPbVADLfoAHPMpUWHO1AGF3y_vtDNcORnMLYnxAZHmTY5hw2Bsjb2Wwd2h19nJIliiManE5t3ZdagUShScGo7QDsX1_D9MSNG3WEPzaf11kof7EW7ZSb1xYXV78VwHYg5x6DjWwYlrEmgWR-Dug6kMUUw9VK3WCKuCIsRSpX6SHYIAejNABkKoAXCVseADRlQA5kaABkI9YguUhBrkQoq4QmMhB6h4AO3jABH0YAELdAAvqYAFLTADX1oAJc8mSoFl-mrR2SfFoziegHPIfAAIRoAfKUKeAGAYmvSvwkeMiXGgQMSW9t_YIARk1ACksb3hJjlFLzEE8IGYbW0Eda64kYDzeAmt4WdbKY9U16Z5X0lylxb_Q0Gut0fsLGxSlzeYezp7WANke63HNGfXTvgY4zAKD3GVIGZb8TsYB78y4rhgDqQwDH86k1kkEUE-lkMQg7AkQt1GkxxcE3cSlRwy4AA1HnVjMhX7dgVuBKFIf3YQQPdYDIMJIRAfXhXOVwIRSwXhbmBELuI_GYF5ZCCA0DIiaA1ANjW3P_YbepasHLK4F1BzdeZfNeeTZrI8E_OQlcOKCiJQrg9YC_OzdAx9RGMOKUN6MmDSTSeA8gRgMUekZGNZAZBsbKIKCaF_TrN_LfD_KxL_VjCw_QnjdYTAO4K4LtOgTAXtAdDpMHM2PFajK4D3Rhcw0OZGZaHyVOGKDkFhHAt5fAqABkWIywggUbK2VXaOTDWdMXJOIWIiEiLIWIh_VADIrIzw-IhsF1UggoK4RGKAIiAuNg-cdQgufmXgu_NIriczIzSQsWaQno_bUORQt9AY6o6NVQoiCY2mAtasS3asBmHLB2fgv_UhIzbIrwn_IbaDBsX_f_dAPLZpNoTMMo0Av_CMEKC4g_FXccG4-dbzNEGAR4gomAGFAQaCBLXMV4u4tooiLVChIiJdFdAgT2ZLGsKgZCT1XoUJF0AAah8h6k224Q-D6DDEmxNhgHkMGNe2VTFnhJoGxORMzDRN6nkwvwt14xgDuDBPWKeP5i2JgFHQSAnW2E9kcM3x62O1sXqKmEGzt24zezpih0ADsPQAXflABYOUACx5SnQAaojAA15UAAjbQvWnFcA5ZCRwBE6zK4xEnE_QeTIiaEuwKxSadgX9PNEg9mMg42D4haPXG3MAVAQHP9ADAlGsIlfnTxH2Ek7VT7fmfU6456Mk40ykpFYg7OT7CIzTbNdNPbd7GsBMrNWvNNXNAM0ic3W-KVc0iMS0j2KCW03jZmVmB0low0eIRLIOPMi3XeG3Rg-TC3H0iwOVJ5PARVEfCU82EMvUo07yCMo0ik3ElMmueMz3a2DMgfCc6ldMxXEfHs6JVs_M1Mws4siaUstBO0mgoUSstucgms9o7oestcxs7VG3fc1RMWNY-kx9Jk19BmaQ9kzk8dCUHk5zFcH4jIf4iidAMcl0aLD4hbUcpE3E9gakjElcKHQAUDtAATNPx3RxXE-xyyApoHnMCyMwws9WkPmyt1pk3LRmtLLOhBH0zxgDGAH0fGkPmBEg5EPMdJPLrI5DyyN2A2fKeIWKVQ0nfO5JhL7IsF_L-IBMAoguAvGFAp1PApNKpPRPkyh0ACCzQAHQVkLULmhvMcKJLMLYz8ttK5LPUeKCLliVxiKrSdzLUlgbzKLqLlz2geKGKmLqyQSzy2LbMlhOLKMDkpjeKKJ-LPzSVTCHD19vTes-CPC4iRThCziEi8iawodAAjA0AFhNdS2mT7AAQhEv_KInEsMqwoSpD0ADTMwAQmtE9ocWtuhCdAAUvUAGmvQAZ2VE8CdAB4tMADgVHHfHMWVwEYO2KYfmT0jfPXA3TgTS9CnSmMl1BnIksawykOGHelX9YHTrUHYDIa63Ik044bDysHZk_IlyF3YNeIEwv5G4gKnYFnZAv5Aa70oSuE1kwcg0nySM3Ctc5JGlAgVInIw4sUvfFFTK9M33UHDKy9KM8cvSumEuNZHq8cfqxajfFa8HNc4aj7TS568a4cnyUMo0gqyUkPWHaPGPNHdHAnOUjq1HK7Ay6MpDKivdYjfY-Ii6t2GJA69PKAY6pya6zrRiqVdMlPNPENZAwTFrFRHXdgBs4PdgQAIM0adAA-6MADt_QAMLk-FvV4gCdABMJUAA28wAEujSa8dybgzNKQbcL2BWUAaVaoAcbxYodureqJxkJPSlqI4A5VqLyawjb0afJXLXa0J5xEtJqraQ8yapVIafIbbxwZroy5rKqHb4bI4Xbd5kbUJJjqj3raTDVebREA1U9hcoAcVpzqMvUDZ4g-ZkInVqxdqqMXIuhSC3yx0BKVxOa4AUjBSalhTvqRDjjbqLAodAAmNMACNrQAKDkSrAAHU0ADtjSnUk2Sqm6CtcqcxhHAPmnOy2lGiaDKs2oui28GgOqWmnEnPsTOgoAnOCwAMBch7C80qa58LxbE6pqU6WaQ12byBG68zE6odAAXt0AFLjQABfik8UUbdYagdY7nbEb35DV-Y8757F7ZEQ0y6LAK7ml3B2Da6uTArvzaY0bDKoKFLYKQ8JghAxh3ByKwkzLRwiySLLK9yKLBMaaaL2gujYAnL7SjzWjay3L2LPK45X0KJITEULrG7nDt8gzdY56ikF6D6hdoH4hl6VdJG2bTCTLDdoRTyRrV716BFpH36P7AAeBV_uLntrhpBzjpAZRTs3viJLQezgwenuwe1SvqRrTpXCjjUeLo9VEagcOtzrtq4hkY8cftgbFtfRtyaKrMSjyXK2aJnALhsrCZmxvILkYN0RnT_EYM6MQd5mtx4NcZnMBtNvzs03cdZp-gqta3FXnAdILgkK3ukOjQUNhTFh4vzTNi0L_iUBACam2FcDSCZWoEAl0BAgMDAipX4FQG9EZCQHYH4B-GLGqAyHNB_DJDGbNn4F-PyGoH4CuH4BChwC2ZChqnWH4HKHIH6HzvWYmZAE0nWjwlgGhCwG9AWcfLZkSFzDyCvVNElHNCmb-FLD2erH4Ek1Of4EbSZR-YsAOcZMCPhAgHgFOZdX4DedEHGf4AAD1N4cAAAOHANKEFmsfgCSAFkAJFpMHAAAJi2Z6mxdBcEE1EtEiHxZRbSnRcxf4E0ISRrS-dwBaQgBSG6dQF6ZgTbUJhAFoB9CyHWcmdNFoHNHhfNFmBmH4HkAUA_iAA",mdxType:"Playground"},(function(){return Object(u.b)((function(){var e=C({url:"https://randomuser.me/api",manual:!0}),n=e.data,A=e.loading,t=(e.cancel,e.run),r=Object(s.useMemo)((function(){return(((n||{}).results||[])[0]||{}).email}),[n]);return Object(u.b)(c.a.Fragment,null,Object(u.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(u.b)(a.a,{onClick:t,style:{marginTop:16},mdxType:"Button"},"fetch"))}),{mdxType:"Demo"})})),Object(u.b)("h3",{id:"\u8f6e\u8be2"},"\u8f6e\u8be2"),Object(u.b)(g.c,{__position:2,__code:"() => {\n  function Demo() {\n    const { data, loading, timer } = useAPI({\n      url: `https://randomuser.me/api`,\n      pollingInterval: 3000,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={timer.pause}>pause</Button>\n          <Button onClick={timer.stop}>stop</Button>\n          <Button onClick={timer.resume}>resume</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:g.c,useState:s.useState,useMemo:s.useMemo,Button:a.a,Spin:o.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWGIjyONCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGKRZFwUEgKBo9AEVh4iuJMQrNzWtYW4X6eoFzqNcaBxooqiaKjWmtbx5aI299BmfYAAff3WPkDlQ3gUJkbsQP2AAbQAXQ5GOQrjgOg-AEOcHt6ALct2PfdIuOc5Ft9c66Ag-nMN3c4TA7q9rHi-MatBVJnLa2Y5md9qz8XWO7-QpAb1Ba-rxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQ_brct0eOOZah7CgWJti27mMhwOKKP26-iKkMfOOHuv9_H8wj5PnZz_5S-UTX_a_4zAfgfIeu8tav04nsVAx9T7fx5mHekR59pdEQTAYBb9n570kI_Ce082hYxfpuXeJcRbgy1mXCutYKY0XYEQ2m8gyG1kkJjaGZgvwgDgIZYyRFTLmXDLgAgWgKDAX0AwNS9oTJwESE5OyOAPSSOkeQP0fIDaI3Kg0aCA44CMEsATdYfQe4omnCkFSFg15kzgN9K4YoACODIUT6xeKY9gURUChHiFY9gXhKDklQM4nWJ8Zz61oIbDxVw3FEECAIZxR4JhOE8RGAxVwjGcz2DMCxnjbH2III4ggi18ZVUiNSHRYhnHUGcKEcgCI4CWKuBGdAVxLD5OWqwSgXAymoDPAIIQAgEndS6T05p7BWntLMODMwsApiYkoB4eIVE4kNImkkuexiljmI-rU9gWT4A5NUnktGmiin3yRKUxycN7QM10JAFI2yXI-QjLE4YizPYhFQIkIZNMLDTNmVAeZTzxqPKcCpeQKkzAMwFrpHyOjxonIjOYq4GitElI-esBmXQ7E7L-U4ca5jlajn-dHb5cz8XYujmAUc01nEUIEOYBRTkSlVxrP4RRE1mnC2dGMQ5RBim6O9ignxrAYBLC6OoLY-yCmfMtui7JWKHy4oMWs9JOB1m2xIbnHAEw6ARmZTIlBaNJV135VAQVEYUH_jgMyC6V0brNDNZoZkT0fLtBJu9agX1fp2otagVGVwUEfjAVbd2IsPjRGmhGboEqA0WBFWK8N_qg10xDs4xNHIi4xwAFLOB1AAORwCkmcEAwCJDhekjkhcVwGprK49xPdcXVviEXCwAS9YGyNrWpVzagmtobcLagAyhRXFxX27pQpG1QIqVU-A9w0kEGVagCd1S4BFyUOseNIKzlYDEgjJGUwIUqXYZwoydKjIWQEUIoCehQLgTElBCm8xwxOUSAAGVsAQciRF7DxCgLMnY77iKkVoH-sUYA_1njAOS2ydE3T2RfKCpycEalWB_gIEpvlYr9CNrQCcWcW6zh8iFODTaMNZGOPOeC40COOSI2wEj5APB1IjHInArgArTqRPHIZXKeUB1yOGSAzp0BiEWkHNxCRxqiagIRvsxGsMohY1MfDUn-w0awxfAQ94rhIgo1J4aaJJRCgjHRupnGZTcaDshBGaBshiCWJgOCRV2ARKiYtStExbBhyiGgAo407PwWTfidzvnkg-SC_5tzcA82kXtCFsjiQwsEg1ch-8PnYvxfc3R8adHnHjOrIA8aLzK3kHJAISwP99gRnC4lnm954100q2p5LimVyVa6J53D41KuhfWOu_0sUwhEXyyi2mRXxQlbK-ECrCWGvoFqzWFrOHvPmh8lqLIOB6ojFRuaALEW5PCmy1JlBoQjz5aYyxlIbG3kcauFx--uieMWZgPx3MkbaaVd2wp9gK3aBrdGIDfzI2WOlaPOV-rSWZv-cLRNSrdGXPC2peYDlhTuW3YbEawV-rd6g-qzkHyRECBA5gOVnV5BWUY4TTWSHk30seFh-TurCW6OMbkdq1jqdY4J1m3XR42HUHsEAFfKgAzyMAIvKgAs7UAG-mgALNUAAD6gBpzUAIXRYvAAw_4AQptACQ5oAFfjAB7aoAZb9AA55lGnnAqYCMrrhYdo2bhxo-6G2hkeZNjmE7SkYJGQ22cEJKOUk5IBsUXHZUxd7BLrDp6ZwVAKJxQiRCHYJEY6tac8towrWShtseYdrhuPFgk0rgT9h8uNLeOWYE_tsZG6xJoBCWo7oOp0kbNQ5K-tUBPHeN8UqWhkh2CAHozQAZCqAFwlGXgA0ZUAOZGgAZCPWI753oSG_hKO1Elv3PAB28YAI-jAAhboAF9TAApaYAa-tABLnkyedfup0JMWU0tGIz0Cz7b4ABCNAD5SprwAwDG7_7b0up_SR0CCGaf8_7BACMmoAUli7_F960UnmEc2EFnnuVO1Y000uwThPzaTPzBVtimHqjXnCVAMG31R6zMCAO6H7CORgDFFz1QFQ3ALkTOwu0SA4wOVM1u3uz4ys0ExUgZlwOR3wNHAriuGYOpAIIrkYBORhSkRkReQk0j1eTixL3UjLwyAry2TYJpQADV4gGRa91h24EoUgrgm9xQ_F1gMgelPFH9nF85XBPFLBnE4gnJ5xUC14qVkIODqDWDCDoVzM6CBNTlqw1MrhK1AErCZh_NDsjwfD_M75upkDfDutgVxD7Rt0I4pQ3oyYNJNIBDyBGAxR6RkYYU3kGxsogoJoIDzsoCKCYCCkbs0FUiYibN1hMA7grg706BMBH0X07l2cLYVVQ8rgq8LEUjw5kZlofJ04YoORrFZDUAFCoAlCyiei0MbZQ8pgY45NAN1pRwU5-YiISIsgujCDRjxjuiCAxAGxK1VCCgrhEYoAiIi5zCEQe5Qii40QcjOCiJuCaUi4PCpiRZvCQC14x1_Dup7iHCK4x1gifDl0LZM9qwGY1MnYHjHsdFkMui0jdjaCC9rNEkXDshZtLk2hMwVjWCwAIwQp0TECQ9xxsTgMKs0QYACSZjoRBUBBoJ-tnsNJSSTiiJ419EiIwMIMCBvYhs6YqBkJZ1ehukXQABqHyHqCHPZD4PoMMD7VEBkPw4Y0nF7LWPkmgKUoUzMUU3qfzHrDPWzGAO4VksEwk24yEmAT9BIH9bYb2PI8gq7JHYpCYqYZwpEwTMnOmbnQAOw9ABd-UAFg5QALHktdABqiMADXlQACNsl89cVw0VkJHB-TMtMSBTpT9B_M8cIw7AClJp2AmMl12BDjEpxhySFo494dDRvVbS1UawNV7d6k_ZlTLZKdbi4ysTnpVSkyNT9lK0tZKdWiItyl98aladTcZ0Nk50F0p1azSJ09SEA00yMyvYoIczbNmZWZ2Y1Djj4gBsQ5pyM9d5SyjD_MM9KyLAQ0CAw1dChR3SGzmhTVYzEzvJWzEz1SZShzq4ezq9bY51H9Xy65eyvzX9w1X8dyaxs8tY5y0YsylzoRX9VyO51DDRNzuhtzDyQK9zFSLzolhZQS9TSNDSdNCS8tsSLTv0JRrSCsVwYAaS6SKJ0BnyXQfI5SYB_snzBSZT2AtTxSVxudABQO0ABM0hXCXFcSnNTOimgH8ubZDUS2dQBP7LPFccCzMxcuRXMjC8JGAMYR_R8QBeYESVNPMtco4hC04pCjkWbJPDjfCqk4Is04iq07kq8iwSijIaioiWi1i-iws-U6Mli5MzUsU_zbnQAILNAAdBQEqEpvJEvcrEteLq0kqitnWCNkvoXktHHTIgqUrzSWFUsc3UvYE0vaGCN0tgvXKMq3NMuyyWAsqo0LCpO-Jsq_TsuJ1yNINY0GIdPvidMRMe3oN6L0Vpm50ACMDQAWE0wraZKcABCJy2k-kty3yzs4WbnQANMzABCa2Hx5yO26CV0ABS9QAaa9ABnZWH0V0AHi0wAOBVZcFdhZXARgHYphbimdmNWqdTwqoc4q5rxLo1FTIq5qEENr7qWdzs2cOM49s9SyHsnt4DqxzKE5LKXJJCJ9EiWUiKGrSKTdI8WV7qyCeSRYYzoF7yfI2ypKULJkc8hj4SurwaUKJq_z682dxqvN2yXyYqRYy4YVrrxw7qmN_qo4g4gaULQLOAbyCb4qHyfImzEz3qaxuc-de8-9xcJdFdfTzqxdMdXqOzxNcqCcUMnSsi6clTlo4a20EanIMbWqY8aw_yx9u0oARCnMMgzbgLudAAgzV10AD7owAO39AAwuRcXcBrUV0AEwlQADbzAAS6MVvl2VvJ0p3pqkoD0Dw_ND2Vh9viAlo9LbyupuonGQj-rIMBo5xQrpijuFp8mZKYt3jQnnAGy7JFm5yVoDRZp8jTvHC-o7J-qPCztZ2jl5tLqwrh0VLLh1LTQtp8UCSdytsVQsQTrcQbQztQHLWrCNOmJci6FUPqstJRpXBNvOzapKLhJiPJp6ocslrb0ACY0wAI2tAAoOWWsAAdTQAO2MtdhYha5r2L_LhZ3zx7LaQk21k6BaJpxrqbE6oAv6LAnbddVc-wh6ChFduLAAwFwvqX1GrrhkuAv5o-sIJDw_viCNvIA3rgGnP5u50ABe3QAUuNAAF-JHyDVLI5uZ2zo7tzqzzTVuLHtHPfpd3iFnosHnpqpcguPnBXpIp2HsvrJtn5Ojo4oCrbwmCEDGHcGgp6RSq5PnImgypUtfzUo0oAvaG4dgCKv0rgo3OMuLIqvZw4Yog5NjXXttIKMoMEYpxvMHt1i7XQYAaZvzqtswaSsT2hH0aprjoi3ry_oIcIcAB4FMh0uTOzm6hnm2hoNHLchRU8i8nB-tW0R3eRBvm_ulcGOP-yeqARhz85hifYVZCJYA2jBpIth9gDh0sg4gygs-Yv8fMlIIubKupzOGClcIw5JADP8Iw849wS4m42wkcz8mmq1Ox4e8fV3D1cOY7X1ecNc545DTw4WQBL46ZoVYWYI4E8IgA9hJqbYVwNIc1agQCXQECAwMCSVfgVAb0RkJAdgfgH4YsaoDIc0H8MkW5i2fgGk_IagfgK4fgEKHAQFkKGqdYfgcocgfoOOv5-5kATSdaPCWAaELAb0d53CtmRIXMPIbzU0SUc0R5v4UsUF6sfgNrGF_gU9c1YliwcFg0uo-ECAeAGFytfgXF0QO5_gAAPU3hwAAA4cA0pqWax-AJJyWQBOWkwcAAAmQFnqIVmlwQTUS0SIMV7ltKPlgV_gbrMZA9Ql3AK5CAFII51AE5kRK9QmEAWgH0LIP5h500Wgc0Nl80WYGYfgeQBQBhIAA",mdxType:"Playground"},(function(){return Object(u.b)((function(){var e=C({url:"https://randomuser.me/api",pollingInterval:3e3}),n=e.data,A=e.loading,t=e.timer,r=Object(s.useMemo)((function(){return(((n||{}).results||[])[0]||{}).email}),[n]);return Object(u.b)(c.a.Fragment,null,Object(u.b)(o.a,{spinning:A,mdxType:"Spin"},"email: ",r),Object(u.b)(a.a.Group,{style:{marginTop:16}},Object(u.b)(a.a,{onClick:t.pause,mdxType:"Button"},"pause"),Object(u.b)(a.a,{onClick:t.stop,mdxType:"Button"},"stop"),Object(u.b)(a.a,{onClick:t.resume,mdxType:"Button"},"resume")))}),{mdxType:"Demo"})})),Object(u.b)("h2",{id:"api"},"API"),Object(u.b)("pre",null,Object(u.b)("code",Object.assign({parentName:"pre"},{}),"// \u4ec5\u9700\u914d\u7f6e\u4e00\u6b21\uff0c\u8bbe\u7f6e\u53d1\u9001\u8bf7\u6c42\u6240\u4f7f\u7528\u7684\u65b9\u6cd5\nconfigRequest(requestMethod);\n\nconst { // \u8fd4\u56de\u6570\u636e\u540c useAsync\n  loading: boolean;\n  error?: Error;\n  data?: T;\n  cancel: () => void;\n  run: () => Promise<T>;\n  timer: {\n    stop: () => void;\n    resume: () => void;\n    pause: () => void;\n  };\n} = useAPI(params)\n\nparams: {\n  url: string;\n  options?: RequestInit;\n  manual?: boolean;\n  pollingInterval?: number;\n  onSuccess?: (d: T) => void;\n  onError?: (e: Error) => void;\n  fetch?: (url: string, options?: RequestInit) => Promise<T>;\n}\n")))}E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useAPI/index.mdx"}}),E.isMDXComponent=!0},"./src/useAsync/index.ts":function(e,n,A){"use strict";A.d(n,"a",(function(){return p}));var t=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/defineProperty.js"),r=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/slicedToArray.js"),o=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/regenerator/index.js"),a=A.n(o),i=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/toConsumableArray.js"),s=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/asyncToGenerator.js"),c=A("./node_modules/_@babel_runtime@7.6.2@@babel/runtime/helpers/esm/classCallCheck.js"),u=A("react");function g(e,n){var A=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),A.push.apply(A,t)}return A}function l(e){for(var n=1;n<arguments.length;n++){var A=null!=arguments[n]?arguments[n]:{};n%2?g(A,!0).forEach((function(n){Object(t.a)(e,n,A[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(A)):g(A).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(A,n))}))}return e}var m=function e(n,A){var t=this;Object(c.a)(this,e),this.remaining=0,this.delay=0,this.cb=null,this.start=0,this.timerId=0,this.stop=function(){clearTimeout(t.timerId),t.timerId=0,t.remaining=t.delay},this.pause=function(){clearTimeout(t.timerId),t.remaining-=Date.now()-t.start},this.resume=function(){for(var e=arguments.length,n=new Array(e),A=0;A<e;A++)n[A]=arguments[A];if(t.start=Date.now(),clearTimeout(t.timerId),t.cb)return new Promise((function(e){t.timerId=setTimeout(Object(s.a)(a.a.mark((function A(){return a.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:t.cb&&(t.cb.apply(t,Object(i.a)(n||[])),e("No resolve value when pollingInterval is set, please use onSuccess & onError instead"));case 1:case"end":return A.stop()}}),A)}))),t.remaining)}))},this.remaining=A,this.delay=A,this.start=A,this.timerId=A,this.cb=n};"undefined"!==typeof Options&&Options&&Options===Object(Options)&&Object.isExtensible(Options)&&Object.defineProperty(Options,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Options",filename:"src/useAsync/index.ts"}});var d=function(){},B=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(u.useState)({loading:!1,cancel:d,run:B,timer:{stop:d,resume:B,pause:d}}),o=Object(r.a)(t,2),c=o[0],g=o[1],p=Object(u.useRef)(void 0),I=Object(u.useRef)(0),C=Object(u.useRef)(!0),j=Object(u.useRef)(!1);Object(u.useEffect)((function(){return I.current+=1,C.current=!0,function(){I.current+=1}}),n);var O=Object(u.useCallback)((function(){var n=I.current;return g((function(e){return l({},e,{loading:!0})})),e.apply(void 0,arguments).then((function(e){return n===I.current&&(A.onSuccess&&A.onSuccess(e),g((function(n){return l({},n,{data:e,loading:!1})}))),e})).catch((function(e){return n===I.current&&(A.onError&&A.onError(e),g((function(n){return l({},n,{error:e,loading:!1})}))),e}))}),n),b=Object(u.useCallback)((function(){j.current=!0,I.current+=1,p.current&&p.current.stop(),g((function(e){return l({},e,{error:new Error("stopped"),loading:!1})}))}),[]),E=Object(u.useCallback)((function(){j.current=!0,I.current+=1,p.current&&p.current.pause(),g((function(e){return l({},e,{error:new Error("paused"),loading:!1})}))}),[]),M=Object(u.useCallback)(Object(s.a)(a.a.mark((function e(){var n,A,t,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,A=new Array(n),t=0;t<n;t++)A[t]=o[t];if(j.current){e.next=4;break}return e.next=4,O.apply(void 0,A);case 4:if(!p.current){e.next=6;break}return e.abrupt("return",(r=p.current).resume.apply(r,Object(i.a)(A||[])));case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)}))),[]),h=Object(u.useCallback)(Object(s.a)(a.a.mark((function e(){var n,t,r,o,s,c,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,t=new Array(n),r=0;r<n;r++)t[r]=u[r];if(o=I.current,A.manual&&C.current){e.next=6;break}return e.next=5,O.apply(void 0,Object(i.a)(t||[]));case 5:s=e.sent;case 6:if(I.current!==o){e.next=15;break}if(p.current=new m((function(){return h.apply(void 0,t)}),A.pollingInterval),!C.current||!A.manual){e.next=12;break}C.current=!1,e.next=15;break;case 12:return e.next=14,(c=p.current).resume.apply(c,Object(i.a)(t||[]));case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),[A.pollingInterval,A.manual,O]),w=Object(u.useCallback)((function(){I.current+=1;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return A.pollingInterval?(A.manual||b(),h.apply(void 0,n)):O.apply(void 0,Object(i.a)(n||[]))}),[O,A.pollingInterval]),y=Object(u.useCallback)((function(){I.current+=1,g((function(e){return l({},e,{error:new Error("canceled"),loading:!1})}))}),[]);return Object(u.useEffect)((function(){if(A.pollingInterval)h();else if(!A.manual){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];O.apply(void 0,Object(i.a)(n||[]))}return function(){I.current+=1,b()}}),[A.manual,A.pollingInterval,O,h]),{loading:c.loading,error:c.error,data:c.data,cancel:y,run:A.manual&&A.pollingInterval?M:w,timer:{stop:b,resume:M,pause:E}}}"undefined"!==typeof ReturnValue&&ReturnValue&&ReturnValue===Object(ReturnValue)&&Object.isExtensible(ReturnValue)&&Object.defineProperty(ReturnValue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReturnValue",filename:"src/useAsync/index.ts"}}),p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsync",filename:"src/useAsync/index.ts"}})}}]);