(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./src/useAPI/index.mdx":function(e,n,A){"use strict";A.r(n);var t=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),r=(A("./node_modules/_antd@3.21.4@antd/es/spin/style/index.js"),A("./node_modules/_antd@3.21.4@antd/es/spin/index.js")),o=(A("./node_modules/_antd@3.21.4@antd/es/button/style/index.js"),A("./node_modules/_antd@3.21.4@antd/es/button/index.js")),a=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=A("react"),s=A.n(i),c=A("./node_modules/_@mdx-js_react@1.3.0@@mdx-js/react/dist/index.es.js"),u=A("./node_modules/_docz@1.2.0@docz/dist/index.esm.js"),l=(A("./node_modules/_antd@3.21.4@antd/es/select/style/index.js"),A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js")),g=A.n(l),m=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),B=A("./node_modules/_umi-request@1.2.2@umi-request/dist/index.es.js"),d=A("./src/useAsync/index.ts"),p=fetch||B.a,j=function(e){return Object(d.a)(Object(m.a)(g.a.mark(function n(){return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,A){p(e.url,e.options).then(function(){var e=Object(m.a)(g.a.mark(function e(A){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,A.json();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){A(e)})}));case 1:case"end":return n.stop()}},n)})),[JSON.stringify(e)],{manual:e.manual,pollingInterval:e.pollingInterval,onError:e.onError,onSuccess:e.onSuccess})},C=j;j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAPI",filename:"src/useAPI/index.ts"}}),A.d(n,"default",function(){return w});E="Demo";var E,b={},O="wrapper";function w(e){var n=e.components,A=Object(a.a)(e,["components"]);return Object(c.b)(O,Object.assign({},b,A,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"useapi"},"useAPI"),Object(c.b)("p",null,"\u4e00\u4e2a\u5185\u7f6e ",Object(c.b)("inlineCode",{parentName:"p"},"umi-request"),"\uff0c\u5e2e\u4f60\u7ba1\u7406\u7f51\u7edc\u8bf7\u6c42\u7684 Hook\uff0c\u652f\u6301\u7acb\u5373\u6267\u884c\uff0c\u624b\u52a8\u89e6\u53d1\u6267\u884c\uff0c\u8f6e\u8be2\u3002"),Object(c.b)("h2",{id:"\u4ee3\u7801\u6f14\u793a"},"\u4ee3\u7801\u6f14\u793a"),Object(c.b)("h3",{id:"\u7acb\u5373\u6267\u884c"},"\u7acb\u5373\u6267\u884c"),Object(c.b)(u.c,{__position:0,__code:"() => {\n  function Demo() {\n    const [state, set] = useState(0)\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api?id=${state}`,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>\n          <div>id: {state}</div> <div>email: {email}</div>\n        </Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={run}>reload</Button>\n          <Button onClick={cancel}>cancel</Button>\n          <Button onClick={() => set(c => c + 1)}>increase id</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:u.c,useState:i.useState,useMemo:i.useMemo,Button:o.a,Spin:r.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhvYABtFEyPW0cAF1xookisgjEK3zpumGag9BolcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJwW-igK5ikIW57keTIMEiCiBBwI9JFmCBvq4bgABJgBZ2h5GKGLBZreQBY9wtUBc6jXGgLmiKomio1pj28eWiMY9F0j2AAHwT1ivdDeBQmRuwk6Z9mOUZkLOez4BU4D6B3Z9ixGbj1x2fLj3vY9roCD6cxw4rhMDvb2seL4xq0FUmctsl6WZ32zWK5jWQuCuJ3SJdyHY1rKHS511iV_kBfZHHwWpB71BO_bxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQseI8P4_OL2VB7CgLEbYW0lb7S6MPdAUgf7UAPl3I-HFmTUAAUAracsERQH2mg-cUCEH723h7eBJ9zBIMATsLaUc2YEAjOQNGNCADUvUOT7TQOQU0RFOCQMkNAvBX8CFcNwefS-sCd6bm3g3T2msm4t1rBTGi7BRG03kODbcmNoZmC_CAOAhljJEVMuZcMuACBaAoMBfQDA1L2i6AARwZC5eicpQhEAgOaaxtiXwqQsVMEycBEhOTsjgD03jfHkD9HyPQAhEblQaNBAccBGCWAJusbWVwUTThSCpCwz8yZwG-lcMUNj4AEAaKpAgGT2BRFQKEeIuT2BeEoOSVAZTBQJAKMU2gAhWDVKuJUoggQBBlLAKOaaNSIzJOvmkpYWSPo5LyTAApKJikvEWvjKqkRqTxLEGU6gzhQjkARHAGZE10BXEsMs5arBKBcC2agM8AghACBGd1W59yznsAuVcsw4MzAM1cYUqiEwnDjUGQQaaidk6_JRCpb51AXJq10j5eJ40kQNiyVcaJsSNlnKSbonxTkNltxrP4YJE0sVf2dGMGJayiL4ojF0OA9TWAwEVjAdQWwCCvJphXCFBB_nDAfFknA2tJkzAIDgKZMLxEexwBMOgEYiV-LpWjTlXcJzwAZTAOVIxA5TDpf-elqBAYfnwQtY1HxojTQjN0FZyqu5dFZZKS1RreGeydR7L2dcmYAClnA6gAHI4FSQUCAYBEgRiyRyWuK4bU1gqVU1eArY3xA9RYZpgCZxtIyJ0-NIqcCptaeErNya_7PKFFcAV1AS0CCLds3Z-z7h7BzTWvZ8A4AeqUOsJ1sMsBiQRkjLxuidIqQ0VooyQSnL6LUNK4xQE9CgXAmJKCFN5jhicokAAMrYAg5EiL2HiFADwEptjbuInPJlGkxRgGPWeMAgzbJ0TdPZdxQ04IHKsPyDIGzfKxX6J02gqqohoAKN0xxfTxohShd-tgWRjjzngsB3pGQwMQZTT-6D5APBXBjgEnArgAr1qRIzXOaNKVOOpZYROuRwyQGdOgMQi1k6VISONRjUBkN9lQ3-lmwp4OgZ8uBxyKGoN_piEeAQ94eOIb42x4aaJJRCmoRhklxGZTrPI8nZCCM0DZDEEsTAcEirsB6X0xa0aJi2DTgBges4fJ6fgmUiwZm4A4Fs8kGzsHEj2fxOZrjUw3P6c8456V76xM5D83ZlcgX0PjXQ2Ur51YUTP3GhQ6NOITYjA-OSAQlh337AjIFkTGR7yuprPl4L94kMRYJBZwOVnxqBZc7FtjcUKJJY5SuVLJx0vkEy9lo8uXSuiaKwFqrXRLMFHYOaHyWosg4HqiMVG5ovNOZ841gTqr6RHiS9h3DKR8OoESIRjkVwSOqeWupqjWnQuJNpoFnz41pu0Fm6MQGnmOujAy-KLLOXwh5aqwVkLxWLDBompFjwJnJGjmkeS1ZpGYD4rpeqpV28BuFdC3mVQ72iIEF6zAXL8qaHJeNcD375n0Pg-dXTUHEZsNyrw2CnOHJAft0eOtxx3RABXyoAM8jACLyoALO1ABvpoACzVAAA-oAac1ACF0fzwAMP-AEKbQAkOaABX4wAe2qAGW_QAOebGosAjqAjKCUqrlL64c2vGVvPiAyPMmxzB5vTQW3sthKGknJOwlrTa63sEuhWu5QpOB-1oB2L6_gQj7aLfXTzbrt5KCW9VwDM4mcWC9p55RNYpECHMBpmA1HsirbBo5OG9o0DtMid0HUIrpmfuVYmqANS6kNKVPIyQ7BAD0ZoAMhVAC4SqLwAaMqAHMjQAMhHrGtykDNHSumGZAxkOvLPAB28YAI-jAAhboAF9TAApaYAa-tABLnkyVAOzm0HJGccqwrz3noAnw3wACEaAHylJXgBgGI35Wx5VxK0H8uUf-v7BACMmoAUlir-fMcopeYhnhBXw-TU4BI7Z7YHZEYrKH4qQMz1TPzdIAGtZKryAQa_7dD9hUowBijNyp6fpAHbZ4ZXAEYQHLQnZkYUbp6Z60bQEwpTDoGw5YEtxXB0HUgME4HIpIq4oE6vIsYhB2BIgQZ55jjhJF7sCsGoAABqZucOCSX6FgECQGtSwgte6wGQ9yNSlaZS1cNSlgZSWCq8sBMwZSSsTBKmREYhiK52mmNGmy6w_2M8K4CWL8_-z8nmdKbO8BLhK4zWREHhhh6wyB3-_ozo3a8MGefahob0ZMGkmknBjAYo9IyMSK-2DY2UQUE0-Bu2hB-2h2ymGBcR6cyMOm6wmAdwVwS6dAmAq6G6LkPkhG5c4qfsVwJe2S-RCRBAy0PkxcMUR2ohkOqekhUADIrRGc7RshvsLkzMp6SwWOnMqsREPMtA-R2BEhUhwxhRDY0a8hiUho8QREHqehvhHqxh7GGBYhHqdhYxdMjhhxEOG23UzBZhfRXEms3h3UBhba5cCe6wDM_2wcmBGe8SwWaxoxlhGel2DYFBl2xWDMVAyEvm56GefM0JNBPu44cx_xYAeWaIMAyJvu0IjKAg0EYQREaOFEF6EYiMUAREna1YFE16t6VChOtMsJNAHwfQYYUwdCPkPUnmgGoqvQdyLoPkqIDIrhTxSm1qmsLJ_J7JLoXJvUiesWumMAdwNJ9MKJSsfxu6CQB6OwWGIBBBQe4BPRpBcO8RIx5BF21hSOtMLOgAdh6AC78oALBygAWPLK6ADVEYAGvKgAEbaz7q4rg_LISOBwnRZtCskCkcmeZY4Rh2ArKTTsDYatrsBbEpBXAindBexM4p7mBgAGoZFwCSoJkyoGrVw2kVzE5KzBmZhPQ-TSlsmCk0Dk5dzE4NFOau4tpNkqqtliqb61otoRjVxx6CxJ4VzRmxnRxQSJm6ZiwSxSwJSpk7FUkZmM5h4SLOrZnHBiyrleyaxmogp4CWpe5HCSnOoVlBlhm-bPR1kRn6CdnlnNBhql4wo9kP6XHtzdme73KHkvKrl0wjk-xjlozxlTnQhHmzkjwLmUnsKZm_moTbwbmqFCjbnFaR4lEFnSYomOFal7q6nbAxxta0wwAElEkUToD1kcl1bYmebXmymZjyk8krgs6ACgdoACZpkuguK4xO_25Ft5b5DmwWPFrJjhL2K4_5gFcZk5ASSZiFZYhmMAYwlaj4jh8wIkHI4F85VwUFy5KFSwh2GFeJrx2FOph6-FZZNYRFGQJFJJgl8J6Z1FF5Nl7A9FnmLOgAQWaAA6CuxZxQ-dxTeY2XxeMAJX5aKq8SJYog4aODGUBZJQGksDJd0vJewIpe0K8apepQoVpQtDpQzvpS5G4ZtuidqfuiZfjukQabtiaaYWaQUVMKCZQR0ddnTCzoAEYGgAsJpeW0zE4ACEFlhJxJ2QNld5NYLOgAaZmACE1r3qzpttLoACl6gA016ADOyr3lLoAPFpgAcCpi6S6ayuBarjhKzAE4Z4ZM7_lcVBW0XsoBUbm-XnVpx3EHW067b06HbHUrgbmQk0ZKk5VrYMwF6ZrxAxHEqFU4UmUrilUHWgEEUeyBn_wXmhlwk2WrmwA6qjizJtGWlWFZ6azdXdmV705dV8mDUBVa6jhIq7U6rIT3WgFPW5xDn_lA4Pk0UNmXk-SVkXlDVNUN7s7t4d4C6C5S5OmbX87I5nVM3MaJU44CDAkpEU4SnLS_XD5QAA1OTg1HUh41jdkD5D5Zq8Gj4IZVpiKwUs6ABBmmroAH3RgAdv6ABhcuUu4HGlLoAJhKgAG3mAAl0QLRLkLaeQ-QTcFe7h7k-X7BbLbfEOzYLCzjtdqhOBTTTlTdnM9bBUDiUo5T5FpbBWhPOOwtGh7CzoLcak3KTRHddUzbdWzpTXTrHTTanZrHTaqssTXYnh6ozBrfUmmoPrblAMKtkoHZUkmpHagJGtWGqeMcjRAkZcVXqSuCrRVcdlVcCejWCdaSeVnQ3oAExpgARtaABQcmNYAA6mgAdsbK5SkOU-3OVY0PlN0tI27tJZoh300TRdU41B1QDX3DUN4m1y59jN0FBS5MWABgLpvbPh1V3MJUOfHvBeKfLVmkreQJPehVXZrCzoAC9ugApcaAAL8X3l_BuftdHWXcnHHaJQ3UrB3dMrmh_RfX9VAP3RYIPTCe4OgqPbhaZYvTWIzRRcfbaQ3hMEIGMO4KBfchFVQuORNDFdJUeQlQpUeY-HodkK-OldsZlTBf4bpbnGxnSTemynrmVYdZkUaTkYw3TC2f7U5prW3U_eA_9ZwWFW6tCEuZwA-XfQY13XGk_Qg4g4ADwKaDXKUdASD1WcODFdsDQRjc4pTJFczDcp3JsFQD259dK4jd9jlehDz5Rjl9PdBDPuyTitnBFD7Ag9G5mxc5Chzsf4KZHq8V18M2MlHq1cKSp6zmM5AZNDCsr1yEZacTD9vtDandSTZDP0U13QVw4Cc55xwW9hX8jhRa-VTKLx_VHx_hKk4MGiTU2wrgaQeq1AgEugIEBgYEyq_AqA3ojISA7A_APwxY1QGQ5oP4ZIBz5c_ABJ-Q1A_AVw_AIUOALzIUNU6w_A5QrCEA_tjzRzIAmk60eEsA0IWA3oVzMGZIlAiQuYeQ42poko5oJzfwpYHz1Y_Alm_z_AFkGgcA6LFgXzKpFR8IEA8A_z0a_AiLoghz_AAAem_DgAABw4BpQEs1j8ASTYsgB0tJg4AABMLzPU7LhLIAjizi3K3LDLrzzLIrAL1LlokQUrjLLLbLIA_hnyw6qLuAugkAKQqzqA6zpic6hMIAtAPoWQjzxzpotALimo5oswMw_A8gCgSiQAA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=Object(i.useState)(0),n=Object(t.a)(e,2),A=n[0],a=n[1],u=C({url:"https://randomuser.me/api?id=".concat(A)}),l=u.data,g=u.loading,m=u.cancel,B=u.run,d=Object(i.useMemo)(function(){return(((l||{}).results||[])[0]||{}).email},[l]);return Object(c.b)(s.a.Fragment,null,Object(c.b)(r.a,{spinning:g,mdxType:"Spin"},Object(c.b)("div",null,"id: ",A)," ",Object(c.b)("div",null,"email: ",d)),Object(c.b)(o.a.Group,{style:{marginTop:16}},Object(c.b)(o.a,{onClick:B,mdxType:"Button"},"reload"),Object(c.b)(o.a,{onClick:m,mdxType:"Button"},"cancel"),Object(c.b)(o.a,{onClick:function(){return a(function(e){return e+1})},mdxType:"Button"},"increase id")))},{mdxType:"Demo"})}),Object(c.b)("h3",{id:"\u624b\u52a8\u89e6\u53d1\u6267\u884c"},"\u624b\u52a8\u89e6\u53d1\u6267\u884c"),Object(c.b)(u.c,{__position:1,__code:"() => {\n  function Demo() {\n    const { data, loading, cancel, run } = useAPI({\n      url: `https://randomuser.me/api`,\n      manual: true,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button onClick={run} style={{ marginTop: 16 }}>\n          fetch\n        </Button>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:u.c,useState:i.useState,useMemo:i.useMemo,Button:o.a,Spin:r.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWOInPnJY0XMNCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGLxfFqJUFCeIrlRBkdd1haxfp6gXOo1xoHGiiqJoqNad1vHlojT30GZ9gAB9fdY-QOVDeBQmRux_fYABtABdDko5CmO_YD4Ag5wW3oDN83o-90iY6z8W32zroCD6cwXezhMDsr2seL4xq0FUmctrZjmZ32jOpdYzv5CkOvUGryvGHYm5mWoewoFibYtv5tCNtgLaoP8wLLEoGYrh6tLUP2y3zbAUdpt3umpBHzjB91qRz5rIvxfB3WS7L2sKZo9hNxXeQ79rSRMehswvxAOAhljJEVMuZcMuACBaAoMBfQDA1L2i6AARwZC5eicpQhEAgOaJBKCXwqXgVMEycBEhOTsjgD0RCSHkD9HyPQAhEblQaNBAccBGCWAJusPoXcUTThSCpCwa8yZwG-lcMUyD4AEAaKpAg_D2D60NlAER7AvCUHJKgWRgoEgFCkbQAQrB4hKINkQQIAhZH7wINNJREYuFXB4ZzPYMwhFKLEbgqRLxFr4yqpEakbCxCyOoM4UI5AERwGEVcCM6AriWA8ctVglAuD-NQGeAQQgBBWO6sk1JMT2BxISWYcGZgGY4IkVRCYThxrmOmsnCcMBxEohUoU62hCQE6XGmw8aSIGyCKuEwlhviYmcJAcQpyviK41n8FQiaAzXbsGdGMZh3iiKjIjF0OAqjWAwD5jAdQWwCDZJpsXWpuDSnDAfIInAXCljnMER9OAN9s44AmHQCMEzSGrLRgcmuNS1lQA2S8kYdspirP_Gs1AgMPxHwtjMumHxojTQjN0Txnya5dB2ZKBFELoU1iDrIumQcC5RwAFLOB1AAORwHYmcEAwCJAjIIjk-cVzIprPIo2DiCBq3cAoguFhNGTxnDojI-iu7nL5douhwqeV7CSSkoUVxrkytSVKgJQSQn3HZTgFVwT4BwALkodYmLYZYDEgjJGzStI6RUv_QBRlKFOTAWoR5UCgJ6FAuBMSUEKbzHDE5RIAAZWwBByJEXsPEKAHgJTbGDcRUitBo1ijANGs8YB962Tom6eyeChpwVCVYfkGRfG-Viv0fRtAalRDQAUK4RiTHjRCg04tbAsjHHnPBatGDa0-XrY5XlJbm3kA8OEiM5CcCuACuqpEsdskLMwUsywftcjhkgM6dAYhFoBwNgkcam6oANt7U2stKIx0EHbcYjIda919j7WWmIR4BD3lPZ29g3b_TVmGmiSUQoIwDvCdOmUPj50B2QgjNA2QxBLEwHBIqsyO0ZEWsyiYtgQ4VqbrOHykH4K4vxEhjDyR0OtsSFhxDcAKWkXtPhqDRGCSPPzfenIFHMMrmIx8Dw40B2yIKdWFEa9xruyLXTHESsRgfHJAISw-b9gRmY7ejI95MV02k7R-8F6mPUa6Chgo41mO4Y45euKFFeP7JXIJk4wnyCifE0eSTim71yao0h9TdtUPsHND5LUWQcD1RGKjc02GSNHuFLpnt3yMGIomiOsdKQJ2oESFOq4M6APLSA0u0D9GOG02YwFqYbmPNecBlhkzowRPijExJ8IUnqMybo_Jms1KJrMYHfBsWD8BDmDmV42dMBRmrPWYi9L2cbOyfo3mVQRWiIEEszASTrzyBTI-ZCurFWkONf418hrHhh3kJeeO6pU6as10eCFo87BABXyoAM8jACLyoALO1ABvpoACzVAAA-oAac1ACF0TdwAMP-AEKbQAkOaABX4wAe2qAGW_QAOeaQosD135MAxlfLlKS4cEONk5PiAyPMmxzBioFRK3sth1qjlJOSIiGlpWBO1bmy61BMlCk4KgFE4oRIhDsEiKVut9vm0_rrJQfnkNOYKKziwOL34rha-YYDMBl3ZCC2DRycN7RoF0Qw7oOpHG3MLZ81liirgqLUUqV-kh2CAHozQAZCqAFwlJ7gA0ZUAOZGgAZCPWBjlIgq9EGMfRkHXh3AB28YAI-jAAhboAF9TAApaYAa-tABLnkyVAJO1VWMiVYbJuT0Cu714ABCNAD5Sv9wAwDGh8p2k8JGTZUCBj_EuPuv2CAEZNQApLFp_yY5RS8xZnCBmLxiL46riTrjmjWPKkGb1TXtWuvhmPnyAbdX7o_ZFkwDFKXVrhafKbdHU3kIMWp1owS3Ohdovxero700q9o_x9lyuCPzru_J-dI6cM2bfGd0M_n4R6Xxr1Jy4yAr9gR_UAADVkddfYat1uCUUia-ENrusBkKkkopnrIrnK4EopYLItzAiF3F3jMLIvzPvv-kRC_u0sliBiun4usFVlcMytxuvLXmvFhqsqFj3iQSuPpkRBQYgesAPpXq-jLlMKamHFKG9GTBpJpGfowGKPSMjB0jFg2NlEFOFuQpFtFrFq3p4svl1nwWweBusJgHcFcF6nQJgL6gGi5D5LHGbDctbFcErkIrwaHMjMtD5KnDFByKIqOGXO_lAAyCYfwQQP1oWDTlMFHEenGrjgQEnELERCRFkCYRPm_h_k4QoQ2Myj_lWoaPEERAXLAfOLQQXMgdvofrYa1gXHgatnTIQckc1qHEeCgTvhkVxGLNQd1AgXqmbALm-lvlVg7GgWLmwrRuEWYaviltgdYp0dkDVgzFQMhNlhpAmhGCFH0VvpWkMRRCMSbDAOMe4dCBsgINBGEERMNtMWLhGIjFAERIatWBRMmqmgQJ7EZrTAMTQB8H0GGFMAANQ-Q9RYaTGXEpIug-SzGkGlFzZIpiznEcq9AvGZh3G9RYYMHVic7KF3KXpFLISNEwChoJARo7CeyN5RbN4L5xzxaoFyGmFTCYFi6pbmGuEWCHaAB2HoALvygAsHKABY8gDoANURgAa8qAARtl7iDiuNCagI4IMWxm0Bcf8dcVhuNhGHYJ4pNOwCOrquwNEYlOMGiN0EHKzsLoaGCiiXcmLI8mjhEj7N8ViotvzJyZmE9D5L8c8dcU1lihYItvoTTpqmHqqjqmaTDlaSRlqmqpqaRHzrfJCoKcKR7FBOKRBszKzOzL_lcNsYTvKVhnirvIqRAZGVCrrLChYngAirnvNjqc0CsshPqdls9MaXyfoA6ZXJacrtbDaZnoWTXE6WWbnimVknGVGeaT4UKWjKKf6dCLnkGW3H_rETsXKRyB6fztGZ8cAUKHGbUfzhBjAHcHsVbAsYQbCfCeGpGicWmXTDAEsSsRROgCaa8TKQyFhnmVcS6ECQ8SuIdoAKB2gAJmlvZ3YriLZVY7k0AVk1gPn5kXGEH5aC60zektl-nkISkjllizIwBjCZ6PiEHzAiQcidkhk9nhn9kcZLBTpQlb4VELlhqInbArnalrkbmrHZCPlDHvFsk8l_FHmAn3FYaHaABBZoADoKN5d5GZr55FeyORL5tGhFOAFRn5tM7OTZPpE0f5FKSwgF1aIF7AYF7QFRUFMFMRYZfZNWnOyFwWRShRYWFEi5mFLyZ-Yhs-UW1hHWPi8hAheJ6-hJbFh2gARgaACwmgxbTItgAITrkZCblrGEXPnEl66ABpmYAITW1uR23QH2gAKXqADTXoAM7K1u72gA8WmABwKs9m9mLK4ACuOPzDPhIaznxfeRxW-axcyuDp8cxQCRymQUeDPttlFrtnHBlULp8WvqlohdHHHChQsQ_o7lANwZMv4XCRhcuSuDNrpelaueLOydmdyYMYRXGbAECqODYc4R0VgRLmLI5VWertUg5U8TlR5TWCXB0slUCshGVRIZVQhWLHxRaRmYeUVd5M9HqaRVtZ5adqbmbrdndu9hSfFTdrvIVdcduuJZNgIG0S4dDubHxq1cKh1U5GleOtBZClWXbg7sKlfjWhkMzuwAOUXoAEGawOgAfdGAB2_oAGFyciXK8Q72gAmEqAAbeYACXR71r2n16ZE0G1LF7AF07KtynKBs8Q91NYh2SVgKE4B1I65VEcAce29ZtW0ihFFScRMAYtaE84hOeV4sh2H1kKO1PkvN4431x4JVUOgtR1kcotu8Z1qEBRIRNSMi78BKcNqi_K9uWOUAVyJZ1p6ufMyEjK1YM5bhLkXQP-6FCJvVtMUN-lmJo-gN81-J2BQ1dMh2gATGmABG1oAFByPlgADqaAB2xgDj8aRZLSeXGcWUIlxTbeKrosKlzctU7SRurlzQ9Vjd9n2IXTOO9ueYAGAuSdXudlNcH56Nxt-VZtYN8QEN5AQdkJp1Ysh2gAL26AClxoAAvxNuMyipqVetO2BtVVIJBK_Mjt-d8N9t7tFgnt_R7gcBftS5SJfGzKl1P1OdZ5euEwQgYw7g7ZqSK4P5IpQlAFueYloFNZ7QiRsAMlkpwZcl0tC0ilSFTVwWBxKauywNQ9aJUhpxusedbNW9xdnNbFdMfd7VZ-PFHO0IvZnAGZDlK1xNUAXN49E9gAPAqz3FwC1bb60i0r0j2vr3yfGn27zn3HmUW7yd1jmr0rhRxEMc0O2s2lnINCrxCu1cTU4oOYNUI71o2XqKlREAPSleF_hSkpAFyiXrSxp_iAUFwQG2I6M4AQEJEH28xC7ITyrl3s0KLM3k7WOiNtU_QBXsBXA-3BlZG0b4FiyEFSo61SoVHVH0EqTgz_xNTbCuBpAgrUCAS6AgQGBgSfL8CoDeiMhIDsD8A_DFjVAZDmg_hkhpNmz8BLH5DUD8BXD8AhQ4BVMhQ1TrD8DlDkD9BO3lMZMgCaTrR4SwDQhYDegFMtpkiUCJC5h5CaamiSjmhZN_Clh1PVj8AoatP8AWQaBwCzMWANNTnqHwgQDwCtPMr8DjOiDpP8AAB6m8OAAAHDgGlGszWPwBJIsyACc0mDgAAExVM9S3PrMgAYJYLFIoiPNnPVOXNfNtOHOWiRCAvnNXM3MgD0H5LWrTO4C6CQApDROoCxMwJuqEwgC0A-hZDlOZOmi0DYKajmizAzD8DyAKAfxAA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=C({url:"https://randomuser.me/api",manual:!0}),n=e.data,A=e.loading,t=(e.cancel,e.run),a=Object(i.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(c.b)(s.a.Fragment,null,Object(c.b)(r.a,{spinning:A,mdxType:"Spin"},"email: ",a),Object(c.b)(o.a,{onClick:t,style:{marginTop:16},mdxType:"Button"},"fetch"))},{mdxType:"Demo"})}),Object(c.b)("h3",{id:"\u8f6e\u8be2"},"\u8f6e\u8be2"),Object(c.b)(u.c,{__position:2,__code:"() => {\n  function Demo() {\n    const { data, loading, timer } = useAPI({\n      url: `https://randomuser.me/api`,\n      pollingInterval: 3000,\n    })\n    const email = useMemo(\n      () => (((data || {}).results || [])[0] || {}).email,\n      [data],\n    )\n    return (\n      <>\n        <Spin spinning={loading}>email: {email}</Spin>\n        <Button.Group style={{ marginTop: 16 }}>\n          <Button onClick={timer.pause}>pause</Button>\n          <Button onClick={timer.stop}>stop</Button>\n          <Button onClick={timer.resume}>resume</Button>\n        </Button.Group>\n      </>\n    )\n  }\n  return <Demo />\n}",__scope:{props:this?this.props:A,Playground:u.c,useState:i.useState,useMemo:i.useMemo,Button:o.a,Spin:r.a,useAPI:C},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSDcjgGBnAILIljyGA9RgIhhzQo1ZXlM1cIg9goOvcIIlQJZnBmNBUPQhj3AIdBmPwuUhPQT04EkIjYElGSCESX0VVQPD1UImAAEFoIaAT3RkgRyEkCjtIaSRVGwUT1MDSU9MYxUwVQXQUWOU4sJIpT4HYbhWPWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ2CgAWSL2AANki6L1jAYCADFvWgRJgv4ZxDgRB1MBgoR-CWGjUEoOA4oRLLqxymhnAgLDLnYABGJKYvkRznKmTS5m89gIyg8gbCgdAw1QjlvLECboxkdgUU87hgGwjysXkLca2AaboDm4IADIzvGRJ5koZpjtm-buCeuUwGQyUBlQdp2AAfg2E6wwjRarnu07UEG6spBkKs3zMGF1MwMAwigKZAaWlaIdG5dqwsYBUe4ZbgBXCxXqc7tzC1ajKFRwnsZrCxhtY45olcJYoEoDsCiWGIjyONCfJMnTJqJuncgEKArmKQhbnuR5MgwSIKIEHAj0kWYIGKGKRZFwUEgKBo9AEVh4iuJMQrNzWtYW4X6eoFzqNcaBxooqiaKjWmtbx5aI299BmfYAAff3WPkDlQ3gUJkbsQP2AAbQAXQ5GOQrjgOg-AEOcHt6ALct2PfdIuOc5Ft9c66Ag-nMN3c4TA7q9rHi-MatBVJnLa2Y5md9qz8XWO7-QpAb1Ba-rxh2JuagcAAcSQmZ1sU2Atqg_zAssSgZiuHq0tQ_brct0eOOZah7CgWJti27mMhwOKKP26-iKkMfOOHuv9_H8wj5PnZz_5S-UTX_a_4zAfgfIeu8tav04nsVAx9T7fx5mHekR59pdEQTAYBb9n570kI_Ce082hYxfpuXeJcRbgy1mXCutYKY0XYEQ2m8gyG1kkJjaGZgvwgDgIZYyRFTLmXDLgAgWgKDAX0AwNS9ougAEcGQuXonKUIRAIDmikTIl8KlxFTBMnARITk7I4A9FonR5A_R8gNojcqDRoIDjgIwSwBN1h9B7iiacKQVIWDXmTOA30rhimkfAAg-sXhuPYFEVAoR4jePYF4Sg5JUDBJ1ifGc-taCGwiVcMJRBAgCGCWAUc01IkRkcVcZxnM9gzE8ZE3xqjAkEEWvjKqkRqS2LEME6gzhQjkARHALxVwIzoCuJYOpy1WCUC4K01AZ4BBCAEAU7qkzplDPYCMsZZhwZmAZio_xVEJhOHGrkgg01U4ThgH4lEKl1m200TwnS41bHjSRA2DxVxLHWOaUMhxPDtFOWaVXGs_gjETXee7dgzoxhWMaffOx3sUExNYDAJYXR1BbFqWjGmpcTmqO2cMB8HicCOKWLijxH04AkNzjgCYdAIz_N0Sg1FYCawwqgHCqlIwHZTBQf-OA1BAYfnpSHelHxojTQjN0epaK67HKRZKEVvLgV0xDsE-VHIi4xwAFLOB1AAORwCUmcEAwCJAjB4jkhcVzirpqE8JPdcWWviEXCwCS9YGyNta8pV8YmJJSMkjILr7VQPmUKK4hKJlTKFH6tpHSun3DKQQHAEbOnwDgEXJQ6xZWwywGJBGSMrlaR0ipdhnCjKGKcnwtQ5KhFAT0KBcCYkoIU3mOGJyiQAAytgCDkSIvYeIUAPASm2B24ipFaADrFGAAdZ4wC5NsnRN09k1FDTgt0qwP8BDNN8rFfoRtaDHKiGgAo6SFFZPGiFc5G62BZGOPOeCB7MkZGPaeh1m6L3kA8L0iM-icCuACtGpE8dFngsUZCgOuRwyQGdOgMQi0g5hISONGDUAH19ifdulEX6CA3qPT5E9jlH3nu3RfAQ94MN3qw4h4aaJJRCgjC-3p_6ZRNMsMB5CCM0DZDEEsTAcEiogsPRkRa5r8S2DDrulus4fKcfgoqwTcAcASeSOJq9iQpMTCE6h-0CmuPKYJOSld95xpya00Jl940X3BLWdWQB41PbrrpjieWIwPjkgEJYH--wIwqZkwR-8sq6YeZ0zzPTpGVx-a6CJgo40_MGfWPIRDd9RWArpbTOzJwHPkCcy5o8bm_NefQD5msIWs6ifYOaHyWosg4HqiMVG5ppM6tIsKMziGUEKPi--_RX6Ug_tQIkP9VwAMMeWkHZjMAwO5jFcF7TampilfK5VwGUnkujEc-KZzrnwjue0zlvLFh9UTT8y-_jwsKECHMKChpgG0FQsZXCxLudsu6ZyD5RbDmiIEAyzANz1LyAJfG3Kmsu2NtGY8Idv7vntMvrazgKl36jl_u29XR4xzUHsEAFfKgAzyMAIvKgAs7UAG-mgALNUAAD6gBpzUAIXROPAAw_4AQptACQ5oAFfjAB7aoAZb9AA55vSiw12YC_IlXKTVw4OdLPiAyPMmxzCOqSc63sth1qjlJOSIiGkoHtITUuy61AA1HDQCicUIkQh2CRH6rW8OtaMON1zbToWHaiaNwtKTJvjnlxOyBlj4HGurMcnDe0aAUnmO6DqcpxK13ittVASJ0TYlKloZIdggB6M0AGQqgBcJSJ4ANGVADmRoAGQj1hi69RLkPxHsmR_YIAO3jABH0YAELdAAvqYAFLTADX1oAJc8mSoCV1Ggp_SrCLOWegCPiPAAIRoAfKV6eAGAYhv6vZlXHV-30ZneC-AEZNQApLGD7d_6Gg11uj1TXlZj9HWus9YTmjDvKkGZr_XiC4Qs8fLWfTqexS8wkMQpgGKB3qA13n839-q4v7d_1P60BoboHWMQYP0uVvwuwfwriuH7Dv1AJO0YAeXuS-W-2s3g11xCG61PQ9zHDMQlG6CgNQAADVBdLt7Fqx24EoUgrgw9xQ4l1gMhplIl1dgl85XBIlLBgk4gnJ5x0lT9gk0QgpgDqQcC7lf9nc2NgkCMrgBNAFOC14pNmsjwpCZgpM4t5DXcwZ3cM14YRts1DQ3oyYNJNJ4DGAxR6RkZ7lusGxspeDIct939us_00Zv80EjCI4CB2N1hMA7grh606BMAm1W0XIfJ44LYiVbYrg_dPFDDw5kZlofJ04YoOQfFRwK58CoAGQIjjCXCbNCxUAXIY5UNh1pcCAU5-YiISIsgIjH9kjUinCoiGwBMSD91DR4giIi42CEQe4j8i4eDwD6MiIcCi4xDMi6ZJCT814_VZDuoICQDEiTs_UlCRiZhk0LYFV1gGYCMnZeiRtbEV00jnDBsncRt_8GxhtRtctWCgCqBkJpsNJR0IwQo8sGY90riKIbjUQGR7igCYA4UBBoIwgiJHtriRsIxEYoAiI01qwKIJ0p0CBvZFkBMLiaAPg-gwwpgABqHyHqKTR4xEqZF0HyV4mAGQ6YyuWE4WeE2NXoHEzMNE3qW3MzDjGAO4MEm2bI9lZCdYmALtBIXtHYb2V_TrGwnfeI87JpaoqYIQg48DaIogumRHQAOw9ABd-UAFg5QALHkGdABqiMADXlQACNtS8WcVwNlkJHBLiTM2gESKTkSpNXsIw7B6lJp2AP0k12B6jEpxg0RugQ54djtzAwBUArDv1SUaxyURc-k_Zftc4AceCjTMwnofIyTsTkSQc64Adgjsi41G9I1E1EyJUUyZN40o0QzSJrd5V6UrSbSvYoIHSONmZWZ2ZSCrhgT5cPSpNiy_svSmZSJmyrZgVBUDk8ARVQ0jgwzLYIzDTTTptno4zzT9AszwzmgjV_dbY0zx9Bjq4cylyBz-yFlOyWy65Sy0Y7TKzoQByayO4yDGiQT3SOQizUJd42yaChROzljqwlBL1GSyMgDLNiiOTu1uTtgYTbsaxPiMgfiKJ0B4zcTXSGQpNJykSXRqSMSVxEdABQO0ABM0snPHFcAHAjcCmgGc_LFdHC2NQBebFcO3Pc20is_RR0-8ssEFGAMYdXR8QBeYESZVJ02shohsy8vLF8v9d8lkvsX4-LCiTkntPtf8ociwIC74oSsCqc6MyCgk_Uscwi9geCqTRHQAILNAAdBXQswrnOwvkpRQEwsEMtgoRLixIvoRXHIvLPtKoqWBovSXovYEYvaDi1YpPLrPPMbKvLpNjgTn4pcnGPZNEt_KpXgImj5JJT6x6McMiLFP2JOKlJXMR0ACMDQAWE09LaYAcABCaSkCv4wivCiwRHQANMzABCa3TyRxa3YAp0ABS9QAaa9ABnZXT3J0AHi0wAOBVicydhZXBWVxweC_TOt4c7csKCKjKSr7dKEzLKTY1xjIdodOtYcE5RqVw2zjj_9_K-KcMsiXIvcfV4h9CAUvywrxKVwvsor2t_SAK6YDToExyTTLjCLOzYB2VRwEj0imM_8XdhY8q1zg8jlcqsTJqVy6Yy57kBrWTfSP0lqo4g44dHy_q5yYK5rvJnpIyxyprSqo8UdE8k9cc8dydFSeqcdd5ZrkS4MXL3tV1RTzDQcftloDrUkoBjqnJhqSUDcaw1ys9vUWbkCMkskubrzEdAAgzWZ0AD7owAO39AAwuRCXcCtXJ0AEwlQADbzAAS6JJtJzJr-wBxBvMqmAuhjWJWVgVviGxprER36rZQnGQkWq3xWr8vpT1rRp8i4u3P4nnHlxMpFkR1JvpQhp8itvHApuPAWthvtujkRt3jtwsBjumsdzLltxVR5o9SdRSV9SNsXODwRWQlNWrCZL2vepINCp_POtpg5qFIcJ2JMPFOStuotqj0ACY0wAI2tAAoOQqsAAdTQAO2MGdSSVKjK1L0TOzkyFzUzeac9zb_rR6ZNg9zacb2Bxbqc-xU6ZxyckLAAwF3btL2yt3IiBmCstzjjvZyJM4BzzZvIArqRuBUR0ABe3QAUuNAAF-Iz2BTbKGvDph0jtWqTpXBjh4IJWnvdV1nF3TviDzosALoZlaPnBLq5PEov2UueoHvUsQqjwmCEDGHcCPOmRstHGtP3Mop1UcoHOcoYo3PaCgdgE8vYtPPrKaO4u2sCt2ohMnWRS5yus_TfxQMFPrp2znJTqAezxAagEnrPvgIPtIWhAvM4DnNyoBtNuEbBobvYHvsAB4FZ-0uW29-5az-x24FczchE--Bv7VGym5Bv7Yi63GLUi5OgB7OzOselewRw6qAHOriU-oR8-sB9gAutsuojil0vIv8Z0lIIuJyuecrGiouRg4pIdP8Rglo9wNozo5CINWx-R9gQ2_hz1Pml1H6Gqo8dgK4LoEg_oldcQ4WQBMY8OI8WYoSxY6LFScGdhJqbYVwNITlagQCXQECAwMCcVfgVAb0RkJAdgfgH4YsaoDIc0H8MkYZi2fgL4_IagfgK4fgEKHAdZkKGqdYfgcocgfoUelZ0ZkATSdaPCWAaELAb0WZ18tmRIXMPIcLU0SUc0cZv4UsbZ6sfgETI5_gCyDQOAT5iwXZhk7w-ECAeAI5gTfgZ50QEZ_gAAPU3hwAAA4cA0ogWax-AJJfmQAEWkwcAAAmdZnqTF4FkABRJRTZFEXFpFjZ1Fsl452Fy0SIWl5FtFjFkAaLVZAtd53AXQSAFIDp1ALpkRatQmEAWgH0LIFZsZ00WgZRTUc0WYGYfgeQBQBhIAA",mdxType:"Playground"},function(){return Object(c.b)(function(){var e=C({url:"https://randomuser.me/api",pollingInterval:3e3}),n=e.data,A=e.loading,t=e.timer,a=Object(i.useMemo)(function(){return(((n||{}).results||[])[0]||{}).email},[n]);return Object(c.b)(s.a.Fragment,null,Object(c.b)(r.a,{spinning:A,mdxType:"Spin"},"email: ",a),Object(c.b)(o.a.Group,{style:{marginTop:16}},Object(c.b)(o.a,{onClick:t.pause,mdxType:"Button"},"pause"),Object(c.b)(o.a,{onClick:t.stop,mdxType:"Button"},"stop"),Object(c.b)(o.a,{onClick:t.resume,mdxType:"Button"},"resume")))},{mdxType:"Demo"})}),Object(c.b)("h2",{id:"api"},"API"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{}),"\nconst { // \u8fd4\u56de\u6570\u636e\u540c useAsync\n  loading: boolean;\n  error?: Error;\n  data?: T;\n  cancel: () => void;\n  run: () => Promise<T>;\n  timer: {\n    stop: () => void;\n    resume: () => void;\n    pause: () => void;\n  };\n} = useAPI(params)\n\nparams: {\n  url: string;\n  options?: RequestInit;\n  manual?: boolean;\n  pollingInterval?: number;\n  onSuccess?: (d: T) => void;\n  onError?: (e: Error) => void;\n  fetch?: (url: string, options?: RequestInit) => Promise<T>;\n}\n")))}w&&w===Object(w)&&Object.isExtensible(w)&&Object.defineProperty(w,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useAPI/index.mdx"}}),w.isMDXComponent=!0},"./src/useAsync/index.ts":function(e,n,A){"use strict";A.d(n,"a",function(){return p});var t=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/defineProperty.js"),r=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/slicedToArray.js"),o=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/regenerator/index.js"),a=A.n(o),i=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/toConsumableArray.js"),s=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/asyncToGenerator.js"),c=A("./node_modules/_@babel_runtime@7.5.5@@babel/runtime/helpers/esm/classCallCheck.js"),u=A("react");function l(e,n){var A=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),A.push.apply(A,t)}return A}function g(e){for(var n=1;n<arguments.length;n++){var A=null!=arguments[n]?arguments[n]:{};n%2?l(A,!0).forEach(function(n){Object(t.a)(e,n,A[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(A)):l(A).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(A,n))})}return e}var m=function e(n,A){var t=this;Object(c.a)(this,e),this.remaining=0,this.delay=0,this.cb=null,this.start=0,this.timerId=0,this.stop=function(){window.clearTimeout(t.timerId),t.timerId=0,t.remaining=t.delay},this.pause=function(){window.clearTimeout(t.timerId),t.remaining-=Date.now()-t.start},this.resume=function(){for(var e=arguments.length,n=new Array(e),A=0;A<e;A++)n[A]=arguments[A];if(t.start=Date.now(),window.clearTimeout(t.timerId),t.cb)return new Promise(function(e){t.timerId=window.setTimeout(Object(s.a)(a.a.mark(function A(){return a.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:t.cb&&(t.cb.apply(t,Object(i.a)(n||[])),e("No resolve value when pollingInterval is set, please use onSuccess & onError instead"));case 1:case"end":return A.stop()}},A)})),t.remaining)})},this.remaining=A,this.delay=A,this.start=A,this.timerId=A,this.cb=n};"undefined"!==typeof Options&&Options&&Options===Object(Options)&&Object.isExtensible(Options)&&Object.defineProperty(Options,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Options",filename:"src/useAsync/index.ts"}});var B=function(){},d=function(){var e=Object(s.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(u.useState)({loading:!1,cancel:B,run:d,timer:{stop:B,resume:d,pause:B}}),o=Object(r.a)(t,2),c=o[0],l=o[1],p=Object(u.useRef)(void 0),j=Object(u.useRef)(0),C=Object(u.useRef)(!0),E=Object(u.useRef)(!1);Object(u.useEffect)(function(){return j.current+=1,C.current=!0,function(){j.current+=1}},n);var b=Object(u.useCallback)(function(){var n=j.current;return l(function(e){return g({},e,{loading:!0})}),e.apply(void 0,arguments).then(function(e){return n===j.current&&(A.onSuccess&&A.onSuccess(e),l(function(n){return g({},n,{data:e,loading:!1})})),e}).catch(function(e){return n===j.current&&(A.onError&&A.onError(e),l(function(n){return g({},n,{error:e,loading:!1})})),e})},n),O=Object(u.useCallback)(function(){E.current=!0,j.current+=1,p.current&&p.current.stop(),l(function(e){return g({},e,{error:new Error("stopped"),loading:!1})})},[]),w=Object(u.useCallback)(function(){E.current=!0,j.current+=1,p.current&&p.current.pause(),l(function(e){return g({},e,{error:new Error("paused"),loading:!1})})},[]),I=Object(u.useCallback)(Object(s.a)(a.a.mark(function e(){var n,A,t,r,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,A=new Array(n),t=0;t<n;t++)A[t]=o[t];if(E.current){e.next=4;break}return e.next=4,b.apply(void 0,A);case 4:if(!p.current){e.next=6;break}return e.abrupt("return",(r=p.current).resume.apply(r,Object(i.a)(A||[])));case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}},e)})),[]),Q=Object(u.useCallback)(Object(s.a)(a.a.mark(function e(){var n,t,r,o,s,c,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,t=new Array(n),r=0;r<n;r++)t[r]=u[r];if(o=j.current,A.manual&&C.current){e.next=6;break}return e.next=5,b.apply(void 0,Object(i.a)(t||[]));case 5:s=e.sent;case 6:if(j.current!==o){e.next=15;break}if(p.current=new m(function(){return Q.apply(void 0,t)},A.pollingInterval),!C.current||!A.manual){e.next=12;break}C.current=!1,e.next=15;break;case 12:return e.next=14,(c=p.current).resume.apply(c,Object(i.a)(t||[]));case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}},e)})),[A.pollingInterval,A.manual,b]),h=Object(u.useCallback)(function(){j.current+=1;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return A.pollingInterval?(A.manual||O(),Q.apply(void 0,n)):b.apply(void 0,Object(i.a)(n||[]))},[b,A.pollingInterval]),M=Object(u.useCallback)(function(){j.current+=1,l(function(e){return g({},e,{error:new Error("canceled"),loading:!1})})},[]);return Object(u.useEffect)(function(){if(A.pollingInterval)Q();else if(!A.manual){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];b.apply(void 0,Object(i.a)(n||[]))}return function(){j.current+=1,O()}},[A.manual,A.pollingInterval,b,Q]),{loading:c.loading,error:c.error,data:c.data,cancel:M,run:A.manual&&A.pollingInterval?I:h,timer:{stop:O,resume:I,pause:w}}}"undefined"!==typeof ReturnValue&&ReturnValue&&ReturnValue===Object(ReturnValue)&&Object.isExtensible(ReturnValue)&&Object.defineProperty(ReturnValue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReturnValue",filename:"src/useAsync/index.ts"}}),p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsync",filename:"src/useAsync/index.ts"}})}}]);